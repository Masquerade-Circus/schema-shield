//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlX2lzX215X2lwX3ZhbGlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlSXB2NEZpcnN0UGFzcyIsInJlU3VibmV0U3RyaW5nIiwicmVGb3J3YXJkU2xhc2giLCJyZVpvbmUiLCJyZUJhZENoYXJhY3RlcnMiLCJyZUJhZEFkZHJlc3MiLCJWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsIm5hbWUiLCJwb2ludGVyIiwibWVzc2FnZSIsInZhbHVlIiwiY29kZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJ0aGlzIiwiZGVlcEVxdWFsIiwib2JqIiwib3RoZXIiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJpIiwia2V5cyIsIk9iamVjdCIsImtleSIsImlzT2JqZWN0IiwiZGF0YSIsImltcG9ydF9pc19teV9pcF92YWxpZCIsIl9fdG9FU00iLCJSZWdFeHBzIiwidGltZSIsInVyaSIsImVtYWlsIiwiaG9zdG5hbWUiLCJkYXRlIiwiRm9ybWF0cyIsInVwcGVyQ2FzZURhdGEiLCJ0b1VwcGVyQ2FzZSIsInRlc3QiLCJEYXRlIiwiaXNOYU4iLCJnZXRUaW1lIiwibG9jYWwiLCJkb21haW4iLCJzcGxpdCIsImluZGV4T2YiLCJpcHY0IiwiaXNNeUlwVmFsaWQiLCJ2ZXJzaW9uIiwiaXB2NiIsInJlZ2V4IiwiUmVnRXhwIiwiZSIsImR1cmF0aW9uIiwidXVpZCIsImlyaSIsIlR5cGVzIiwib2JqZWN0Iiwic2NoZW1hIiwidmFsaWQiLCJlcnJvciIsImFycmF5Iiwic3RyaW5nIiwibnVtYmVyIiwiaW50ZWdlciIsIk51bWJlciIsImlzSW50ZWdlciIsImJvb2xlYW4iLCJudWxsIiwia2V5d29yZHMiLCJyZXF1aXJlZCIsImhhc093blByb3BlcnR5IiwicHJvcGVydGllcyIsInNjaGVtYVNoaWVsZEluc3RhbmNlIiwiZmluYWxEYXRhIiwicHJvcCIsInNjaGVtYVByb3AiLCJkZWZhdWx0IiwidmFsaWRhdG9yUmVzdWx0IiwidmFsaWRhdGUiLCJtYXhQcm9wZXJ0aWVzIiwibWluUHJvcGVydGllcyIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwiaXNDb21waWxlZFNjaGVtYSIsInBhdHRlcm5Qcm9wZXJ0aWVzIiwibWF0Y2giLCJwYXR0ZXJuIiwicGF0dGVybnMiLCJwcm9wZXJ0eU5hbWVzIiwiJHJlZiIsImRlZmluaXRpb25zIiwiJGlkIiwiJHNjaGVtYSIsInRpdGxlIiwiJGNvbW1lbnQiLCJpdGVtcyIsInNjaGVtYUl0ZW1zIiwiZGF0YUxlbmd0aCIsInNjaGVtYUl0ZW1zTGVuZ3RoIiwiaXRlbXNMZW5ndGgiLCJNYXRoIiwibWluIiwidmFsaWRhdG9yRXJyb3JzIiwibWluSXRlbXMiLCJtYXhJdGVtcyIsImFkZGl0aW9uYWxJdGVtcyIsInVuaXF1ZUl0ZW1zIiwidW5pcXVlIiwiU2V0IiwiaXRlbSIsIml0ZW1TdHIiLCJKU09OIiwic3RyaW5naWZ5IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImhhcyIsImFkZCIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsInBhdHRlcm5SZWdleHAiLCJmb3JtYXQiLCJmb3JtYXRJbnN0YW5jZSIsImZvcm1hdFZhbGlkYXRlIiwiZm9ybWF0cyIsImdldCIsImVudW0iLCJlbnVtSXRlbSIsImpvaW4iLCJtaW5pbXVtIiwiZXhjbHVzaXZlTWluaW11bSIsIm1heGltdW0iLCJtYXgiLCJleGNsdXNpdmVNYXhpbXVtIiwibXVsdGlwbGVPZiIsInF1b3RpZW50IiwiaXNGaW5pdGUiLCJhcmVNdWx0aXBsZXMiLCJlcHNpbG9uIiwiYWJzIiwiYXJlQ2xvc2VFbm91Z2giLCJyb3VuZCIsIm51bGxhYmxlIiwiYWxsT2YiLCJCb29sZWFuIiwiYW55T2YiLCJ2YWxpZGF0aW9uUmVzdWx0Iiwib25lT2YiLCJ2YWxpZENvdW50IiwiZGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jeSIsImNvbnN0IiwiY29udGFpbnMiLCJpZiIsInRoZW4iLCJ0aGVuUmVzdWx0IiwiZWxzZSIsImVsc2VSZXN1bHQiLCJub3QiLCJ0eXBlcyIsIk1hcCIsInR5cGUiLCJhZGRUeXBlIiwia2V5d29yZCIsImFkZEtleXdvcmQiLCJhZGRGb3JtYXQiLCJ2YWxpZGF0b3IiLCJzZXQiLCJjb21waWxlIiwiY29tcGlsZWRTY2hlbWEiLCJjb21waWxlU2NoZW1hIiwibWFwIiwidCIsInRyaW0iLCJmaWx0ZXIiLCJrZXl3b3JkVmFsaWRhdG9yIiwidmFsaWRhdG9ycyIsInB1c2giLCJpc1NjaGVtYUxpa2UiLCJzdWJTY2hlbWEiLCJpbmRleCIsInR5cGVWYWxpZCIsInJlc3VsdCIsImlzU2NoZW1hT3JLZXl3b3JkUHJlc2VudCIsInN1YktleSJdLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9pcy1teS1pcC12YWxpZC9pbmRleC5qcyIsIi4uL2xpYi91dGlscy50cyIsIi4uL2xpYi9mb3JtYXRzLnRzIiwiLi4vbGliL3R5cGVzLnRzIiwiLi4vbGliL2tleXdvcmRzLnRzIiwiLi4vbGliL2tleXdvcmRzL29iamVjdC1rZXl3b3Jkcy50cyIsIi4uL2xpYi9rZXl3b3Jkcy9hcnJheS1rZXl3b3Jkcy50cyIsIi4uL2xpYi9rZXl3b3Jkcy9zdHJpbmcta2V5d29yZHMudHMiLCIuLi9saWIva2V5d29yZHMvbnVtYmVyLWtleXdvcmRzLnRzIiwiLi4vbGliL2tleXdvcmRzL290aGVyLWtleXdvcmRzLnRzIiwiLi4vbGliL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZUlwdjRGaXJzdFBhc3MgPSAvXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC9cblxudmFyIHJlU3VibmV0U3RyaW5nID0gL1xcL1xcZHsxLDN9KD89JXwkKS9cbnZhciByZUZvcndhcmRTbGFzaCA9IC9cXC8vXG52YXIgcmVab25lID0gLyUuKiQvXG52YXIgcmVCYWRDaGFyYWN0ZXJzID0gLyhbXjAtOWEtZjovJV0pL2lcbnZhciByZUJhZEFkZHJlc3MgPSAvKFswLTlhLWZdezUsfXw6ezMsfXxbXjpdOiR8XjpbXjpdfFxcLyQpL2lcblxuZnVuY3Rpb24gdmFsaWRhdGU0IChpbnB1dCkge1xuICBpZiAoIShyZUlwdjRGaXJzdFBhc3MudGVzdChpbnB1dCkpKSByZXR1cm4gZmFsc2VcblxuICB2YXIgcGFydHMgPSBpbnB1dC5zcGxpdCgnLicpXG5cbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gNCkgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKHBhcnRzWzBdWzBdID09PSAnMCcgJiYgcGFydHNbMF0ubGVuZ3RoID4gMSkgcmV0dXJuIGZhbHNlXG4gIGlmIChwYXJ0c1sxXVswXSA9PT0gJzAnICYmIHBhcnRzWzFdLmxlbmd0aCA+IDEpIHJldHVybiBmYWxzZVxuICBpZiAocGFydHNbMl1bMF0gPT09ICcwJyAmJiBwYXJ0c1syXS5sZW5ndGggPiAxKSByZXR1cm4gZmFsc2VcbiAgaWYgKHBhcnRzWzNdWzBdID09PSAnMCcgJiYgcGFydHNbM10ubGVuZ3RoID4gMSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIG4wID0gTnVtYmVyKHBhcnRzWzBdKVxuICB2YXIgbjEgPSBOdW1iZXIocGFydHNbMV0pXG4gIHZhciBuMiA9IE51bWJlcihwYXJ0c1syXSlcbiAgdmFyIG4zID0gTnVtYmVyKHBhcnRzWzNdKVxuXG4gIHJldHVybiAobjAgPj0gMCAmJiBuMCA8IDI1NiAmJiBuMSA+PSAwICYmIG4xIDwgMjU2ICYmIG4yID49IDAgJiYgbjIgPCAyNTYgJiYgbjMgPj0gMCAmJiBuMyA8IDI1Nilcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGU2IChpbnB1dCkge1xuICB2YXIgd2l0aG91dFN1Ym5ldCA9IGlucHV0LnJlcGxhY2UocmVTdWJuZXRTdHJpbmcsICcnKVxuICB2YXIgaGFzU3VibmV0ID0gKGlucHV0Lmxlbmd0aCAhPT0gd2l0aG91dFN1Ym5ldC5sZW5ndGgpXG5cbiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIHByb2JhYmx5IGJlIGFuIG9wdGlvbiBpbiB0aGUgZnV0dXJlXG4gIGlmIChoYXNTdWJuZXQpIHJldHVybiBmYWxzZVxuXG4gIGlmICghaGFzU3VibmV0KSB7XG4gICAgaWYgKHJlRm9yd2FyZFNsYXNoLnRlc3QoaW5wdXQpKSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHZhciB3aXRob3V0Wm9uZSA9IHdpdGhvdXRTdWJuZXQucmVwbGFjZShyZVpvbmUsICcnKVxuICB2YXIgbGFzdFBhcnRTZXBhcmF0b3IgPSB3aXRob3V0Wm9uZS5sYXN0SW5kZXhPZignOicpXG5cbiAgaWYgKGxhc3RQYXJ0U2VwYXJhdG9yID09PSAtMSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIGxhc3RQYXJ0ID0gd2l0aG91dFpvbmUuc3Vic3RyaW5nKGxhc3RQYXJ0U2VwYXJhdG9yICsgMSlcbiAgdmFyIGhhc1Y0UGFydCA9IHZhbGlkYXRlNChsYXN0UGFydClcbiAgdmFyIGFkZHJlc3MgPSAoaGFzVjRQYXJ0ID8gd2l0aG91dFpvbmUuc3Vic3RyaW5nKDAsIGxhc3RQYXJ0U2VwYXJhdG9yICsgMSkgKyAnMTIzNDo1Njc4JyA6IHdpdGhvdXRab25lKVxuXG4gIGlmIChyZUJhZENoYXJhY3RlcnMudGVzdChhZGRyZXNzKSkgcmV0dXJuIGZhbHNlXG4gIGlmIChyZUJhZEFkZHJlc3MudGVzdChhZGRyZXNzKSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIGhhbHZlcyA9IGFkZHJlc3Muc3BsaXQoJzo6JylcblxuICBpZiAoaGFsdmVzLmxlbmd0aCA+IDIpIHJldHVybiBmYWxzZVxuXG4gIGlmIChoYWx2ZXMubGVuZ3RoID09PSAyKSB7XG4gICAgdmFyIGZpcnN0ID0gKGhhbHZlc1swXSA9PT0gJycgPyBbXSA6IGhhbHZlc1swXS5zcGxpdCgnOicpKVxuICAgIHZhciBsYXN0ID0gKGhhbHZlc1sxXSA9PT0gJycgPyBbXSA6IGhhbHZlc1sxXS5zcGxpdCgnOicpKVxuICAgIHZhciByZW1haW5pbmdMZW5ndGggPSA4IC0gKGZpcnN0Lmxlbmd0aCArIGxhc3QubGVuZ3RoKVxuXG4gICAgaWYgKHJlbWFpbmluZ0xlbmd0aCA8PSAwKSByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICBpZiAoYWRkcmVzcy5zcGxpdCgnOicpLmxlbmd0aCAhPT0gOCkgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZSAoaW5wdXQpIHtcbiAgcmV0dXJuIHZhbGlkYXRlNChpbnB1dCkgfHwgdmFsaWRhdGU2KGlucHV0KVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHZhbGlkYXRvciAob3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fVxuXG4gIGlmIChvcHRpb25zLnZlcnNpb24gPT09IDQpIHJldHVybiB2YWxpZGF0ZTRcbiAgaWYgKG9wdGlvbnMudmVyc2lvbiA9PT0gNikgcmV0dXJuIHZhbGlkYXRlNlxuICBpZiAob3B0aW9ucy52ZXJzaW9uID09IG51bGwpIHJldHVybiB2YWxpZGF0ZVxuXG4gIHRocm93IG5ldyBFcnJvcignVW5rbm93biB2ZXJzaW9uOiAnICsgb3B0aW9ucy52ZXJzaW9uKVxufVxuXG5tb2R1bGUuZXhwb3J0c1snX19hbGxfcmVnZXhlc19fJ10gPSBbXG4gIHJlSXB2NEZpcnN0UGFzcyxcbiAgcmVTdWJuZXRTdHJpbmcsXG4gIHJlRm9yd2FyZFNsYXNoLFxuICByZVpvbmUsXG4gIHJlQmFkQ2hhcmFjdGVycyxcbiAgcmVCYWRBZGRyZXNzXG5dXG4iLCJleHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBuYW1lOiBzdHJpbmc7XG4gIHBvaW50ZXI6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB2YWx1ZTogYW55O1xuICBjb2RlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBwb2ludGVyPzogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5wb2ludGVyID0gcG9pbnRlcjtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdFZhbGlkYXRvciA9IChzY2hlbWEsIGRhdGEsIHBvaW50ZXIpID0+IHtcbiAgcmV0dXJuIFtuZXcgVmFsaWRhdGlvbkVycm9yKCdObyB2YWxpZGF0b3IgZm9yIHRoaXMgc2NoZW1hJywgcG9pbnRlcildO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBFcXVhbChvYmo6IEFycmF5PGFueT4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvdGhlcjogQXJyYXk8YW55PiB8IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSAmJiBBcnJheS5pc0FycmF5KG90aGVyKSkge1xuICAgIGlmIChvYmoubGVuZ3RoICE9PSBvdGhlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFkZWVwRXF1YWwob2JqW2ldLCBvdGhlcltpXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiBvdGhlciA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAob2JqID09PSBudWxsIHx8IG90aGVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gb2JqID09PSBvdGhlcjtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKG90aGVyKS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZiAoIWRlZXBFcXVhbChvYmpba2V5XSwgb3RoZXJba2V5XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIG9iaiA9PT0gb3RoZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChkYXRhKSB7XG4gIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShkYXRhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFyZUNsb3NlRW5vdWdoKGEsIGIsIGVwc2lsb24gPSAxZS0xNSkge1xuICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDw9IGVwc2lsb24gKiBNYXRoLm1heChNYXRoLmFicyhhKSwgTWF0aC5hYnMoYikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VVRGMTZMZW5ndGgoc3RyKSB7XG4gIGxldCBsZW5ndGggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNvZGVQb2ludCA9IHN0ci5jb2RlUG9pbnRBdChpKTtcbiAgICBpZiAoY29kZVBvaW50ID4gMHhmZmZmKSB7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGxlbmd0aCsrO1xuICB9XG4gIHJldHVybiBsZW5ndGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWVwQ2xvbmUob2JqOiBhbnkpOiBhbnkge1xuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtpXSA9IGRlZXBDbG9uZShvYmpbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKGlzT2JqZWN0KG9iaikpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgIHJlc3VsdFtrZXldID0gZGVlcENsb25lKG9ialtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG4iLCJpbXBvcnQgaXNNeUlwVmFsaWQgZnJvbSAnaXMtbXktaXAtdmFsaWQnO1xuaW1wb3J0IHsgRm9ybWF0RnVuY3Rpb24gfSBmcm9tICcuL2luZGV4JztcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBUaGUgZGF0ZXRpbWUgMTk5MC0wMi0zMVQxNTo1OTo2MC4xMjMtMDg6MDAgbXVzdCBiZSByZWplY3RlZC5cbmNvbnN0IFJlZ0V4cHMgPSB7XG4gICdkYXRlLXRpbWUnOiAvXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pVChcXGR7Mn0pOihcXGR7Mn0pOihcXGR7Mn0pKFxcLlxcZCspPyhafChbKy1dKShcXGR7Mn0pOihcXGR7Mn0pKSQvLFxuICB0aW1lOiAvXihcXGR7Mn0pOihcXGR7Mn0pOihcXGR7Mn0pKFxcLlxcZCspPyhafChbKy1dKShcXGR7Mn0pOihcXGR7Mn0pKSQvLFxuICB1cmk6IC9eW2EtekEtWl1bYS16QS1aMC05K1xcLS5dKjpbXlxcc10qJC8sXG4gIGVtYWlsOlxuICAgIC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLyxcbiAgaG9zdG5hbWU6IC9eW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2Mn0oXFwuW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2Mn0pKlthLXpBLVowLTldJC8sXG4gIGRhdGU6IC9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSkkLyxcbiAgJ2pzb24tcG9pbnRlcic6IC9eXFwvKD86W15+XXx+MHx+MSkqJC8sXG4gICdyZWxhdGl2ZS1qc29uLXBvaW50ZXInOiAvXihbMC05XSspKCN8XFwvKD86W15+XXx+MHx+MSkqKT8kLyxcbn07XG5cbmV4cG9ydCBjb25zdCBGb3JtYXRzOiBSZWNvcmQ8c3RyaW5nLCBGb3JtYXRGdW5jdGlvbiB8IGZhbHNlPiA9IHtcbiAgWydkYXRlLXRpbWUnXShkYXRhKSB7XG4gICAgY29uc3QgdXBwZXJDYXNlRGF0YSA9IGRhdGEudG9VcHBlckNhc2UoKTtcbiAgICBpZiAoIVJlZ0V4cHNbJ2RhdGUtdGltZSddLnRlc3QodXBwZXJDYXNlRGF0YSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodXBwZXJDYXNlRGF0YSk7XG4gICAgcmV0dXJuICFpc05hTihkYXRlLmdldFRpbWUoKSk7XG4gIH0sXG4gIHVyaShkYXRhKSB7XG4gICAgcmV0dXJuIFJlZ0V4cHMudXJpLnRlc3QoZGF0YSk7XG4gIH0sXG4gIGVtYWlsKGRhdGEpIHtcbiAgICBpZiAoIVJlZ0V4cHMuZW1haWwudGVzdChkYXRhKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IFtsb2NhbCwgZG9tYWluXSA9IGRhdGEuc3BsaXQoJ0AnKTtcblxuICAgIGlmIChsb2NhbC5sZW5ndGggPiA2NCB8fCBsb2NhbC5pbmRleE9mKCcuLicpICE9PSAtMSB8fCBsb2NhbFswXSA9PT0gJy4nIHx8IGxvY2FsW2xvY2FsLmxlbmd0aCAtIDFdID09PSAnLicpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZG9tYWluLmxlbmd0aCA+IDI1NSB8fCBkb21haW4uaW5kZXhPZignLi4nKSAhPT0gLTEgfHwgZG9tYWluWzBdID09PSAnLicgfHwgZG9tYWluW2RvbWFpbi5sZW5ndGggLSAxXSA9PT0gJy4nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGlwdjQ6IGlzTXlJcFZhbGlkKHsgdmVyc2lvbjogNCB9KSxcbiAgaXB2NjogaXNNeUlwVmFsaWQoeyB2ZXJzaW9uOiA2IH0pLFxuXG4gIGhvc3RuYW1lKGRhdGEpIHtcbiAgICByZXR1cm4gUmVnRXhwcy5ob3N0bmFtZS50ZXN0KGRhdGEpO1xuICB9LFxuICBkYXRlKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFJlZ0V4cHMuZGF0ZS50ZXN0KGRhdGEpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAhaXNOYU4obmV3IERhdGUoZGF0YSkuZ2V0VGltZSgpKTtcbiAgfSxcbiAgcmVnZXgoZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICBuZXcgUmVnRXhwKGRhdGEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgJ2pzb24tcG9pbnRlcicoZGF0YSkge1xuICAgIGlmIChkYXRhID09PSAnJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJlZ0V4cHNbJ2pzb24tcG9pbnRlciddLnRlc3QoZGF0YSk7XG4gIH0sXG4gICdyZWxhdGl2ZS1qc29uLXBvaW50ZXInKGRhdGEpIHtcbiAgICBpZiAoZGF0YSA9PT0gJycpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBSZWdFeHBzWydyZWxhdGl2ZS1qc29uLXBvaW50ZXInXS50ZXN0KGRhdGEpO1xuICB9LFxuICB0aW1lKGRhdGEpIHtcbiAgICByZXR1cm4gUmVnRXhwcy50aW1lLnRlc3QoZGF0YSk7XG4gIH0sXG5cbiAgLy8gTm90IHN1cHBvcnRlZCB5ZXRcbiAgZHVyYXRpb246IGZhbHNlLFxuICAnaWRuLWVtYWlsJzogZmFsc2UsXG4gICdpZG4taG9zdG5hbWUnOiBmYWxzZSxcbiAgdXVpZDogZmFsc2UsXG4gICd1cmktcmVmZXJlbmNlJzogZmFsc2UsXG4gIGlyaTogZmFsc2UsXG4gICdpcmktcmVmZXJlbmNlJzogZmFsc2UsXG4gICd1cmktdGVtcGxhdGUnOiBmYWxzZSxcbn07XG4iLCJpbXBvcnQgeyBpc09iamVjdCwgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBWYWxpZGF0b3JGdW5jdGlvbiB9IGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQgY29uc3QgVHlwZXM6IFJlY29yZDxzdHJpbmcsIFZhbGlkYXRvckZ1bmN0aW9uPiA9IHtcbiAgb2JqZWN0KHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmIChpc09iamVjdChkYXRhKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBkYXRhLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0RhdGEgaXMgbm90IGFuIG9iamVjdCcsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuICBhcnJheShzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBkYXRhLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEgIT09IG51bGwgJiYgJ2xlbmd0aCcgaW4gZGF0YSkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGtleSBpcyBhIG51bWJlciBhbmQgdGhlIGxlbmd0aCBpcyB0aGUgc2FtZSBhcyB0aGUgbnVtYmVyIG9mIGtleXMgLSAxIChsZW5ndGgpXG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPiAwICYmIChrZXlzWzBdICE9PSAnMCcgfHwga2V5cy5sZW5ndGggIT09IGRhdGEubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgYW4gYXJyYXknLCBwb2ludGVyKSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgYW4gYXJyYXknLCBwb2ludGVyKSxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfSxcbiAgc3RyaW5nKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgZGF0YSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhIHN0cmluZycsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuICBudW1iZXIoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBkYXRhLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0RhdGEgaXMgbm90IGEgbnVtYmVyJywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG4gIGludGVnZXIoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyAmJiBOdW1iZXIuaXNJbnRlZ2VyKGRhdGEpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgYW4gaW50ZWdlcicsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuICBib29sZWFuKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIC8vIENoZWNrIGlmIGRhdGEgaXMgYSBib29sZWFuIGxpa2UgdmFsdWVcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBkYXRhLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0RhdGEgaXMgbm90IGEgYm9vbGVhbicsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuICBudWxsKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgbnVsbCcsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxufTtcbiIsImltcG9ydCB7IEFycmF5S2V5d29yZHMgfSBmcm9tICcuL2tleXdvcmRzL2FycmF5LWtleXdvcmRzJztcbmltcG9ydCB7IE51bWJlcktleXdvcmRzIH0gZnJvbSAnLi9rZXl3b3Jkcy9udW1iZXIta2V5d29yZHMnO1xuaW1wb3J0IHsgT2JqZWN0S2V5d29yZHMgfSBmcm9tICcuL2tleXdvcmRzL29iamVjdC1rZXl3b3Jkcyc7XG5pbXBvcnQgeyBPdGhlcktleXdvcmRzIH0gZnJvbSAnLi9rZXl3b3Jkcy9vdGhlci1rZXl3b3Jkcyc7XG5pbXBvcnQgeyBTdHJpbmdLZXl3b3JkcyB9IGZyb20gJy4va2V5d29yZHMvc3RyaW5nLWtleXdvcmRzJztcbmltcG9ydCB7IFZhbGlkYXRvckZ1bmN0aW9uIH0gZnJvbSAnLi9pbmRleCc7XG5cbmV4cG9ydCBjb25zdCBrZXl3b3JkczogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24gfCBmYWxzZT4gPSB7XG4gIC4uLk9iamVjdEtleXdvcmRzLFxuICAuLi5BcnJheUtleXdvcmRzLFxuICAuLi5TdHJpbmdLZXl3b3JkcyxcbiAgLi4uTnVtYmVyS2V5d29yZHMsXG4gIC4uLk90aGVyS2V5d29yZHMsXG59O1xuIiwiaW1wb3J0IHsgQ29tcGlsZWRTY2hlbWEsIFZhbGlkYXRvckZ1bmN0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBpc09iamVjdCB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IE9iamVjdEtleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbiB8IGZhbHNlPiA9IHtcbiAgLy8gT2JqZWN0XG4gIHJlcXVpcmVkKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgZGF0YSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEucmVxdWlyZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IHNjaGVtYS5yZXF1aXJlZFtpXTtcbiAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9wZXJ0eSBpcyByZXF1aXJlZCcsIGAke3BvaW50ZXJ9LyR7a2V5fWApLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gIH0sXG5cbiAgcHJvcGVydGllcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgbGV0IGZpbmFsRGF0YSA9IHsgLi4uZGF0YSB9O1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzY2hlbWEucHJvcGVydGllcyk7XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgY29uc3QgcHJvcCA9IGRhdGFba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hUHJvcCA9IHNjaGVtYS5wcm9wZXJ0aWVzW2tleV07XG4gICAgICAgIGlmIChpc09iamVjdChzY2hlbWFQcm9wKSAmJiAnZGVmYXVsdCcgaW4gc2NoZW1hUHJvcCkge1xuICAgICAgICAgIGZpbmFsRGF0YVtrZXldID0gc2NoZW1hUHJvcC5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNjaGVtYS5wcm9wZXJ0aWVzW2tleV0gPT09ICdib29sZWFuJykge1xuICAgICAgICBpZiAoc2NoZW1hLnByb3BlcnRpZXNba2V5XSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb3BlcnR5IGlzIG5vdCBhbGxvd2VkJywgYCR7cG9pbnRlcn0vJHtrZXl9YCksXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHZhbGlkYXRvclJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5wcm9wZXJ0aWVzW2tleV0sIHByb3ApO1xuXG4gICAgICBmaW5hbERhdGFba2V5XSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xuXG4gICAgICBpZiAoIXZhbGlkYXRvclJlc3VsdC52YWxpZCkge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiB2YWxpZGF0b3JSZXN1bHQuZXJyb3IsIGRhdGE6IGZpbmFsRGF0YSB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YTogZmluYWxEYXRhIH07XG4gIH0sXG5cbiAgbWF4UHJvcGVydGllcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpIHx8IE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA8PSBzY2hlbWEubWF4UHJvcGVydGllcykge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdPYmplY3QgaGFzIHRvbyBtYW55IHByb3BlcnRpZXMnLCBwb2ludGVyKSxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfSxcblxuICBtaW5Qcm9wZXJ0aWVzKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmICghaXNPYmplY3QoZGF0YSkgfHwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID49IHNjaGVtYS5taW5Qcm9wZXJ0aWVzKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ09iamVjdCBoYXMgdG9vIGZldyBwcm9wZXJ0aWVzJywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgYWRkaXRpb25hbFByb3BlcnRpZXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGxldCBmaW5hbERhdGEgPSB7IC4uLmRhdGEgfTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgY29uc3QgaXNDb21waWxlZFNjaGVtYSA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLmlzQ29tcGlsZWRTY2hlbWEoc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZiAoc2NoZW1hLnByb3BlcnRpZXMgJiYgc2NoZW1hLnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllcykge1xuICAgICAgICBsZXQgbWF0Y2ggPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIGluIHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllcykge1xuICAgICAgICAgIGlmIChuZXcgUmVnRXhwKHBhdHRlcm4sICd1JykudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb3BlcnR5IGlzIG5vdCBhbGxvd2VkJywgYCR7cG9pbnRlcn0vJHtrZXl9YCksXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0NvbXBpbGVkU2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRvclJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcywgZmluYWxEYXRhW2tleV0pO1xuXG4gICAgICAgIGZpbmFsRGF0YVtrZXldID0gdmFsaWRhdG9yUmVzdWx0LmRhdGE7XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiB2YWxpZGF0b3JSZXN1bHQuZXJyb3IsIGRhdGE6IGZpbmFsRGF0YSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgfSxcblxuICBwYXR0ZXJuUHJvcGVydGllcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgbGV0IGZpbmFsRGF0YSA9IHsgLi4uZGF0YSB9O1xuICAgIGNvbnN0IHBhdHRlcm5zID0gT2JqZWN0LmtleXMoc2NoZW1hLnBhdHRlcm5Qcm9wZXJ0aWVzKTtcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCAndScpO1xuXG4gICAgICBpZiAodHlwZW9mIHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVyblByb3BlcnRpZXNbcGF0dGVybl0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZmluYWxEYXRhKSB7XG4gICAgICAgICAgICBpZiAocmVnZXgudGVzdChrZXkpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9wZXJ0eSBpcyBub3QgYWxsb3dlZCcsIGAke3BvaW50ZXJ9LyR7a2V5fWApLFxuICAgICAgICAgICAgICAgIGRhdGE6IGZpbmFsRGF0YSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmaW5hbERhdGEpO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICBpZiAocmVnZXgudGVzdChrZXkpKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLnBhdHRlcm5Qcm9wZXJ0aWVzW3BhdHRlcm5dLCBmaW5hbERhdGFba2V5XSk7XG5cbiAgICAgICAgICBmaW5hbERhdGFba2V5XSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xuXG4gICAgICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6IHZhbGlkYXRvclJlc3VsdC5lcnJvciwgZGF0YTogZmluYWxEYXRhIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgfSxcblxuICBwcm9wZXJ0eU5hbWVzKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNjaGVtYS5wcm9wZXJ0eU5hbWVzID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGlmIChzY2hlbWEucHJvcGVydHlOYW1lcyA9PT0gZmFsc2UgJiYgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignUHJvcGVydHkgbmFtZXMgYXJlIG5vdCBhbGxvd2VkJywgcG9pbnRlciksXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZmluYWxEYXRhID0geyAuLi5kYXRhIH07XG5cbiAgICBpZiAoc2NoZW1hU2hpZWxkSW5zdGFuY2UuaXNDb21waWxlZFNjaGVtYShzY2hlbWEucHJvcGVydHlOYW1lcykpIHtcbiAgICAgIGZvciAobGV0IGtleSBpbiBmaW5hbERhdGEpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLnByb3BlcnR5TmFtZXMsIGtleSk7XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiB2YWxpZGF0b3JSZXN1bHQuZXJyb3IsIGRhdGE6IGZpbmFsRGF0YSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgfSxcblxuICBkZWZhdWx0OiBmYWxzZSxcbiAgJHJlZjogZmFsc2UsXG4gIGRlZmluaXRpb25zOiBmYWxzZSxcbiAgJGlkOiBmYWxzZSxcbiAgJHNjaGVtYTogZmFsc2UsXG4gIHRpdGxlOiBmYWxzZSxcbiAgJGNvbW1lbnQ6IGZhbHNlLFxufTtcbiIsImltcG9ydCB7IENvbXBpbGVkU2NoZW1hLCBWYWxpZGF0b3JGdW5jdGlvbiB9IGZyb20gJy4uL2luZGV4JztcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBBcnJheUtleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XG4gIGl0ZW1zKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNjaGVtYUl0ZW1zID0gc2NoZW1hLml0ZW1zO1xuICAgIGNvbnN0IGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAgIGlmICh0eXBlb2Ygc2NoZW1hSXRlbXMgPT09ICdib29sZWFuJykge1xuICAgICAgaWYgKHNjaGVtYUl0ZW1zID09PSBmYWxzZSAmJiBkYXRhTGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXMgbm90IGFsbG93ZWQnLCBwb2ludGVyKSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWFJdGVtcykpIHtcbiAgICAgIGNvbnN0IHNjaGVtYUl0ZW1zTGVuZ3RoID0gc2NoZW1hSXRlbXMubGVuZ3RoO1xuICAgICAgY29uc3QgZmluYWxEYXRhID0gWy4uLmRhdGFdO1xuICAgICAgY29uc3QgaXRlbXNMZW5ndGggPSBNYXRoLm1pbihzY2hlbWFJdGVtc0xlbmd0aCwgZGF0YUxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWFJdGVtc1tpXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgaWYgKHNjaGVtYUl0ZW1zW2ldID09PSBmYWxzZSAmJiB0eXBlb2YgZmluYWxEYXRhW2ldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXRlbSBpcyBub3QgYWxsb3dlZCcsIGAke3BvaW50ZXJ9LyR7aX1gKSxcbiAgICAgICAgICAgICAgZGF0YTogZmluYWxEYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWFJdGVtc1tpXSwgZmluYWxEYXRhW2ldKTtcblxuICAgICAgICBmaW5hbERhdGFbaV0gPSB2YWxpZGF0b3JSZXN1bHQuZGF0YTtcblxuICAgICAgICBpZiAoIXZhbGlkYXRvclJlc3VsdC52YWxpZCkge1xuICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6IHZhbGlkYXRvclJlc3VsdC5lcnJvciwgZGF0YTogZmluYWxEYXRhIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICB9XG5cbiAgICBpZiAoc2NoZW1hU2hpZWxkSW5zdGFuY2UuaXNDb21waWxlZFNjaGVtYShzY2hlbWFJdGVtcykpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRvckVycm9ycyA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYUl0ZW1zLCBkYXRhW2ldKTtcblxuICAgICAgICBkYXRhW2ldID0gdmFsaWRhdG9yRXJyb3JzLmRhdGE7XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0b3JFcnJvcnMudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiB2YWxpZGF0b3JFcnJvcnMuZXJyb3IsIGRhdGEgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICB9LFxuXG4gIG1pbkl0ZW1zKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSB8fCBkYXRhLmxlbmd0aCA+PSBzY2hlbWEubWluSXRlbXMpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXMgdG9vIHNob3J0JywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgbWF4SXRlbXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8IGRhdGEubGVuZ3RoIDw9IHNjaGVtYS5tYXhJdGVtcykge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdBcnJheSBpcyB0b28gbG9uZycsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIGFkZGl0aW9uYWxJdGVtcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8ICFzY2hlbWEuaXRlbXMgfHwgIUFycmF5LmlzQXJyYXkoc2NoZW1hLml0ZW1zKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgaWYgKHNjaGVtYS5hZGRpdGlvbmFsSXRlbXMgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoZGF0YS5sZW5ndGggPiBzY2hlbWEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdBcnJheSBoYXMgdG9vIG1hbnkgaXRlbXMnLCBwb2ludGVyKSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBpZiAoc2NoZW1hU2hpZWxkSW5zdGFuY2UuaXNDb21waWxlZFNjaGVtYShzY2hlbWEuYWRkaXRpb25hbEl0ZW1zKSkge1xuICAgICAgY29uc3QgZmluYWxEYXRhID0gWy4uLmRhdGFdO1xuICAgICAgZm9yIChsZXQgaSA9IHNjaGVtYS5pdGVtcy5sZW5ndGg7IGkgPCBmaW5hbERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmFkZGl0aW9uYWxJdGVtcywgZmluYWxEYXRhW2ldKTtcbiAgICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiB2YWxpZGF0b3JSZXN1bHQuZXJyb3IsIGRhdGE6IGZpbmFsRGF0YSB9O1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsRGF0YVtpXSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgfSxcblxuICB1bmlxdWVJdGVtcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkgfHwgIXNjaGVtYS51bmlxdWVJdGVtcykge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgY29uc3QgdW5pcXVlID0gbmV3IFNldCgpO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHtcbiAgICAgIGxldCBpdGVtU3RyO1xuXG4gICAgICAvLyBDaGFuZ2Ugc3RyaW5nIHRvIFwic3RyaW5nXCIgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGl0ZW1TdHIgPSBgczoke2l0ZW19YDtcblxuICAgICAgICAvLyBTb3J0IG9iamVjdCBrZXlzIHRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlc1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChpdGVtKSkge1xuICAgICAgICBpdGVtU3RyID0gYG86JHtKU09OLnN0cmluZ2lmeShPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoaXRlbSkuc29ydCgoW2FdLCBbYl0pID0+IGEubG9jYWxlQ29tcGFyZShiKSkpKX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbVN0ciA9IEpTT04uc3RyaW5naWZ5KGl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodW5pcXVlLmhhcyhpdGVtU3RyKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXRlbXMgYXJlIG5vdCB1bmlxdWUnLCBwb2ludGVyKSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW5pcXVlLmFkZChpdGVtU3RyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgfSxcbn07XG4iLCJpbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIGRlZXBFcXVhbCB9IGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHsgVmFsaWRhdG9yRnVuY3Rpb24gfSBmcm9tICcuLi9pbmRleCc7XG5cbmV4cG9ydCBjb25zdCBTdHJpbmdLZXl3b3JkczogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24+ID0ge1xuICBtaW5MZW5ndGgoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJyB8fCBkYXRhLmxlbmd0aCA+PSBzY2hlbWEubWluTGVuZ3RoKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1N0cmluZyBpcyB0b28gc2hvcnQnLCBwb2ludGVyKSxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfSxcblxuICBtYXhMZW5ndGgoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJyB8fCBkYXRhLmxlbmd0aCA8PSBzY2hlbWEubWF4TGVuZ3RoKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1N0cmluZyBpcyB0b28gbG9uZycsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIHBhdHRlcm4oc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgY29uc3QgcGF0dGVyblJlZ2V4cCA9IG5ldyBSZWdFeHAoc2NoZW1hLnBhdHRlcm4sICd1Jyk7XG5cbiAgICBpZiAocGF0dGVyblJlZ2V4cCBpbnN0YW5jZW9mIFJlZ0V4cCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1BhdHRlcm4gaXMgbm90IGEgdmFsaWQgcmVndWxhciBleHByZXNzaW9uJywgcG9pbnRlciksXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkID0gcGF0dGVyblJlZ2V4cC50ZXN0KGRhdGEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkLFxuICAgICAgZXJyb3I6IHZhbGlkID8gbnVsbCA6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1N0cmluZyBkb2VzIG5vdCBtYXRjaCBwYXR0ZXJuJywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgZm9ybWF0KHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgZm9ybWF0SW5zdGFuY2UpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXRWYWxpZGF0ZSA9IGZvcm1hdEluc3RhbmNlLmZvcm1hdHMuZ2V0KHNjaGVtYS5mb3JtYXQpO1xuICAgIGlmIChmb3JtYXRWYWxpZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZm9ybWF0VmFsaWRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnN0IHZhbGlkID0gZm9ybWF0VmFsaWRhdGUoZGF0YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkLFxuICAgICAgICBlcnJvcjogdmFsaWQgPyBudWxsIDogbmV3IFZhbGlkYXRpb25FcnJvcihgU3RyaW5nIGRvZXMgbm90IG1hdGNoIGZvcm1hdCAke3NjaGVtYS5mb3JtYXR9YCwgcG9pbnRlciksXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcihgVW5rbm93biBmb3JtYXQgJHtzY2hlbWEuZm9ybWF0fWAsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIGVudW0oc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyBhbiBhcnJheSBvciBhbiBvYmplY3RcbiAgICBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheShkYXRhKTtcbiAgICBjb25zdCBpc09iamVjdCA9IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEuZW51bS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZW51bUl0ZW0gPSBzY2hlbWEuZW51bVtpXTtcblxuICAgICAgLy8gU2ltcGxlIGVxdWFsaXR5IGNoZWNrXG4gICAgICBpZiAoZW51bUl0ZW0gPT09IGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGRhdGEgaXMgYW4gYXJyYXkgb3IgYW4gb2JqZWN0LCBjaGVjayBmb3IgZGVlcCBlcXVhbGl0eVxuICAgICAgaWYgKChpc0FycmF5ICYmIEFycmF5LmlzQXJyYXkoZW51bUl0ZW0pKSB8fCAoaXNPYmplY3QgJiYgdHlwZW9mIGVudW1JdGVtID09PSAnb2JqZWN0JyAmJiBlbnVtSXRlbSAhPT0gbnVsbCkpIHtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChlbnVtSXRlbSwgZGF0YSkpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBiZSBvbmUgb2YgJHtzY2hlbWEuZW51bS5qb2luKCcsICcpfWAsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxufTtcbiIsImltcG9ydCB7IGFyZUNsb3NlRW5vdWdoLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBWYWxpZGF0b3JGdW5jdGlvbiB9IGZyb20gJy4uL2luZGV4JztcblxuZXhwb3J0IGNvbnN0IE51bWJlcktleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XG4gIG1pbmltdW0oc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGxldCBtaW4gPSBzY2hlbWEubWluaW11bTtcbiAgICBpZiAodHlwZW9mIHNjaGVtYS5leGNsdXNpdmVNaW5pbXVtID09PSAnbnVtYmVyJykge1xuICAgICAgbWluID0gc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gKyAxZS0xNTtcbiAgICB9IGVsc2UgaWYgKHNjaGVtYS5leGNsdXNpdmVNaW5pbXVtID09PSB0cnVlKSB7XG4gICAgICBtaW4gKz0gMWUtMTU7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWQgPSBkYXRhID49IG1pbjtcblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZCxcbiAgICAgIGVycm9yOiB2YWxpZCA/IG51bGwgOiBuZXcgVmFsaWRhdGlvbkVycm9yKCdOdW1iZXIgaXMgdG9vIHNtYWxsJywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgbWF4aW11bShzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgfVxuXG4gICAgbGV0IG1heCA9IHNjaGVtYS5tYXhpbXVtO1xuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gPT09ICdudW1iZXInKSB7XG4gICAgICBtYXggPSBzY2hlbWEuZXhjbHVzaXZlTWF4aW11bSAtIDFlLTE1O1xuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gPT09IHRydWUpIHtcbiAgICAgIG1heCAtPSAxZS0xNTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZCA9IGRhdGEgPD0gbWF4O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkLFxuICAgICAgZXJyb3I6IHZhbGlkID8gbnVsbCA6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ051bWJlciBpcyB0b28gYmlnJywgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgbXVsdGlwbGVPZihzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBjb25zdCBxdW90aWVudCA9IGRhdGEgLyBzY2hlbWEubXVsdGlwbGVPZjtcblxuICAgIC8vIERldGVjdCBvdmVyZmxvdyBoYW5kbGluZyBpbiBKU1xuICAgIGlmICghaXNGaW5pdGUocXVvdGllbnQpKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcmVNdWx0aXBsZXMgPSBhcmVDbG9zZUVub3VnaChxdW90aWVudCwgTWF0aC5yb3VuZChxdW90aWVudCkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBhcmVNdWx0aXBsZXMsXG4gICAgICBlcnJvcjogYXJlTXVsdGlwbGVzID8gbnVsbCA6IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ051bWJlciBpcyBub3QgYSBtdWx0aXBsZSBvZicsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIGV4Y2x1c2l2ZU1pbmltdW0oc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gIT09ICdudW1iZXInIHx8ICdtaW5pbXVtJyBpbiBzY2hlbWEpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkID0gZGF0YSA+IHNjaGVtYS5leGNsdXNpdmVNaW5pbXVtICsgMWUtMTU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQsXG4gICAgICBlcnJvcjogdmFsaWQgPyBudWxsIDogbmV3IFZhbGlkYXRpb25FcnJvcignTnVtYmVyIGlzIHRvbyBzbWFsbCcsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIGV4Y2x1c2l2ZU1heGltdW0oc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gIT09ICdudW1iZXInIHx8ICdtYXhpbXVtJyBpbiBzY2hlbWEpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkID0gZGF0YSA8IHNjaGVtYS5leGNsdXNpdmVNYXhpbXVtIC0gMWUtMTU7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQsXG4gICAgICBlcnJvcjogdmFsaWQgPyBudWxsIDogbmV3IFZhbGlkYXRpb25FcnJvcignTnVtYmVyIGlzIHRvbyBiaWcnLCBwb2ludGVyKSxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfSxcbn07XG4iLCJpbXBvcnQgeyBDb21waWxlZFNjaGVtYSwgVmFsaWRhdG9yRnVuY3Rpb24gfSBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIGlzT2JqZWN0LCBkZWVwRXF1YWwgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBPdGhlcktleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XG4gIG51bGxhYmxlKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xuICAgIGlmIChzY2hlbWEubnVsbGFibGUgJiYgZGF0YSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcignVmFsdWUgbXVzdCBiZSBudWxsIHRvIGJlIGVtcHR5JywgcG9pbnRlciksXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICB9LFxuXG4gIGFsbE9mKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBsZXQgZmluYWxEYXRhID0gZGF0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5hbGxPZi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlzT2JqZWN0KHNjaGVtYS5hbGxPZltpXSkpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmFsbE9mW2ldLCBmaW5hbERhdGEpO1xuXG4gICAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogdmFsaWRhdG9yUmVzdWx0LmVycm9yLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpbmFsRGF0YSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWEuYWxsT2ZbaV0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmIChCb29sZWFuKGRhdGEpICE9PSBzY2hlbWEuYWxsT2ZbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3QgbWF0Y2ggYWxsIHNjaGVtYXMgaW4gYWxsT2ZgLCBwb2ludGVyKSxcbiAgICAgICAgICAgICAgZGF0YTogZmluYWxEYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YSAhPT0gc2NoZW1hLmFsbE9mW2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKGBWYWx1ZSBtdXN0IG1hdGNoIGFsbCBzY2hlbWFzIGluIGFsbE9mYCwgcG9pbnRlciksXG4gICAgICAgICAgICBkYXRhOiBmaW5hbERhdGEsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YTogZmluYWxEYXRhIH07XG4gIH0sXG5cbiAgYW55T2Yoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xuICAgIGxldCBmaW5hbERhdGEgPSBkYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEuYW55T2YubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpc09iamVjdChzY2hlbWEuYW55T2ZbaV0pKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEuYW55T2ZbaV0sIGZpbmFsRGF0YSk7XG4gICAgICAgIGZpbmFsRGF0YSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YTtcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGE6IGZpbmFsRGF0YSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHNjaGVtYS5hbnlPZltpXSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YSkgPT09IHNjaGVtYS5hbnlPZltpXSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YSA9PT0gc2NoZW1hLmFueU9mW2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBtYXRjaCBhdCBsZWFzdCBvbmUgc2NoZW1hIGluIGFueU9mYCwgcG9pbnRlciksXG4gICAgICBkYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgb25lT2Yoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xuICAgIGxldCB2YWxpZENvdW50ID0gMDtcbiAgICBsZXQgZmluYWxEYXRhID0gZGF0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5vbmVPZi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlzT2JqZWN0KHNjaGVtYS5vbmVPZltpXSkpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5vbmVPZltpXSwgZmluYWxEYXRhKTtcbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICB2YWxpZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxEYXRhID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWEub25lT2ZbaV0gPT09ICdib29sZWFuJykge1xuICAgICAgICAgIGlmIChCb29sZWFuKGRhdGEpID09PSBzY2hlbWEub25lT2ZbaV0pIHtcbiAgICAgICAgICAgIHZhbGlkQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YSA9PT0gc2NoZW1hLm9uZU9mW2ldKSB7XG4gICAgICAgICAgdmFsaWRDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkQ291bnQgPT09IDEpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YTogZmluYWxEYXRhIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKGBWYWx1ZSBtdXN0IG1hdGNoIGV4YWN0bHkgb25lIHNjaGVtYSBpbiBvbmVPZmAsIHBvaW50ZXIpLFxuICAgICAgZGF0YTogZmluYWxEYXRhLFxuICAgIH07XG4gIH0sXG5cbiAgZGVwZW5kZW5jaWVzKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBsZXQgZmluYWxEYXRhID0gZGF0YTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuZGVwZW5kZW5jaWVzKSB7XG4gICAgICBpZiAoa2V5IGluIGRhdGEgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkZXBlbmRlbmN5ID0gc2NoZW1hLmRlcGVuZGVuY2llc1trZXldO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVwZW5kZW5jeSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBlbmRlbmN5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCEoZGVwZW5kZW5jeVtpXSBpbiBkYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcihgRGVwZW5kZW5jeSAke2RlcGVuZGVuY3lbaV19IGlzIG1pc3NpbmdgLCBwb2ludGVyKSxcbiAgICAgICAgICAgICAgZGF0YTogZmluYWxEYXRhLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZGVwZW5kZW5jeSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGlmIChkZXBlbmRlbmN5KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYERlcGVuZGVuY3kgJHtrZXl9IGlzIG1pc3NpbmdgLCBwb2ludGVyKSxcblxuICAgICAgICAgIGRhdGE6IGZpbmFsRGF0YSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBkZXBlbmRlbmN5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoZGVwZW5kZW5jeSBpbiBkYXRhKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYERlcGVuZGVuY3kgJHtkZXBlbmRlbmN5fSBpcyBtaXNzaW5nYCwgcG9pbnRlciksXG4gICAgICAgICAgZGF0YTogZmluYWxEYXRhLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShkZXBlbmRlbmN5LCBmaW5hbERhdGEpO1xuICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogdmFsaWRhdG9yUmVzdWx0LmVycm9yLCBkYXRhOiBmaW5hbERhdGEgfTtcbiAgICAgIH1cbiAgICAgIGZpbmFsRGF0YSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YTogZmluYWxEYXRhIH07XG4gIH0sXG5cbiAgY29uc3Qoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XG4gICAgaWYgKFxuICAgICAgZGF0YSA9PT0gc2NoZW1hLmNvbnN0IHx8XG4gICAgICAoaXNPYmplY3QoZGF0YSkgJiYgaXNPYmplY3Qoc2NoZW1hLmNvbnN0KSAmJiBkZWVwRXF1YWwoZGF0YSwgc2NoZW1hLmNvbnN0KSkgfHxcbiAgICAgIChBcnJheS5pc0FycmF5KGRhdGEpICYmIEFycmF5LmlzQXJyYXkoc2NoZW1hLmNvbnN0KSAmJiBkZWVwRXF1YWwoZGF0YSwgc2NoZW1hLmNvbnN0KSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZDogZmFsc2UsXG4gICAgICBlcnJvcjogbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBiZSBlcXVhbCB0byBjb25zdGAsIHBvaW50ZXIpLFxuICAgICAgZGF0YSxcbiAgICB9O1xuICB9LFxuXG4gIGNvbnRhaW5zKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmNvbnRhaW5zID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGlmIChzY2hlbWEuY29udGFpbnMpIHtcbiAgICAgICAgY29uc3QgdmFsaWQgPSBkYXRhLmxlbmd0aCA+IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQsXG4gICAgICAgICAgZXJyb3I6IHZhbGlkID8gbnVsbCA6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgaXRlbWAsIHBvaW50ZXIpLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3Qgbm90IGNvbnRhaW4gYW55IGl0ZW1zYCwgcG9pbnRlciksXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmNvbnRhaW5zLCBkYXRhW2ldKTtcbiAgICAgIGlmICh2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGVycm9yOiBuZXcgVmFsaWRhdGlvbkVycm9yKGBWYWx1ZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGl0ZW0gdGhhdCBtYXRjaGVzIHRoZSBjb250YWlucyBzY2hlbWFgLCBwb2ludGVyKSxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfSxcblxuICBpZihzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XG4gICAgaWYgKCd0aGVuJyBpbiBzY2hlbWEgPT09IGZhbHNlICYmICdlbHNlJyBpbiBzY2hlbWEgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3I6IG51bGwsIGRhdGEgfTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNjaGVtYS5pZiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAoc2NoZW1hLmlmKSB7XG4gICAgICAgIGlmIChzY2hlbWEudGhlbikge1xuICAgICAgICAgIGNvbnN0IHRoZW5SZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEudGhlbiwgZGF0YSk7XG4gICAgICAgICAgaWYgKCF0aGVuUmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhlblJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2NoZW1hLmVsc2UpIHtcbiAgICAgICAgY29uc3QgZWxzZVJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5lbHNlLCBkYXRhKTtcbiAgICAgICAgaWYgKCFlbHNlUmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIGVsc2VSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGlmUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmlmLCBkYXRhKTtcbiAgICBpZiAoaWZSZXN1bHQudmFsaWQpIHtcbiAgICAgIGlmIChzY2hlbWEudGhlbikge1xuICAgICAgICBjb25zdCB0aGVuUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLnRoZW4sIGRhdGEpO1xuICAgICAgICBpZiAoIXRoZW5SZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhlblJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmVsc2UpIHtcbiAgICAgIGNvbnN0IGVsc2VSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEuZWxzZSwgZGF0YSk7XG4gICAgICBpZiAoIWVsc2VSZXN1bHQudmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIGVsc2VSZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yOiBudWxsLCBkYXRhIH07XG4gIH0sXG5cbiAgbm90KHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcbiAgICBpZiAodHlwZW9mIHNjaGVtYS5ub3QgPT09ICdib29sZWFuJykge1xuICAgICAgaWYgKHNjaGVtYS5ub3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3Qgbm90IGJlIHZhbGlkYCwgcG9pbnRlciksXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRvclJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5ub3QsIGRhdGEpO1xuICAgIGlmICh2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3Qgbm90IGJlIHZhbGlkYCwgcG9pbnRlciksXG4gICAgICAgIGRhdGEsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcjogbnVsbCwgZGF0YSB9O1xuICB9LFxufTtcbiIsImltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgaXNPYmplY3QgfSBmcm9tICcuL3V0aWxzJztcblxuaW1wb3J0IHsgRm9ybWF0cyB9IGZyb20gJy4vZm9ybWF0cyc7XG5pbXBvcnQgeyBUeXBlcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsga2V5d29yZHMgfSBmcm9tICcuL2tleXdvcmRzJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHQge1xuICB2YWxpZDogYm9vbGVhbjtcbiAgZXJyb3I6IFZhbGlkYXRpb25FcnJvciB8IG51bGw7XG4gIGRhdGE6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0b3JGdW5jdGlvbiB7XG4gIChzY2hlbWE6IENvbXBpbGVkU2NoZW1hLCBkYXRhOiBhbnksIHBvaW50ZXI6IHN0cmluZywgc2NoZW1hU2hpZWxkSW5zdGFuY2U6IFNjaGVtYVNoaWVsZCk6IFJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb3JtYXRGdW5jdGlvbiB7XG4gIChkYXRhOiBhbnkpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBpbGVkU2NoZW1hIHtcbiAgdmFsaWRhdG9ycz86IFZhbGlkYXRvckZ1bmN0aW9uW107XG4gIHR5cGVzPzogVmFsaWRhdG9yRnVuY3Rpb25bXTtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRvciB7XG4gIChkYXRhOiBhbnkpOiBSZXN1bHQ7XG4gIGNvbXBpbGVkU2NoZW1hOiBDb21waWxlZFNjaGVtYTtcbn1cblxuZXhwb3J0IGNsYXNzIFNjaGVtYVNoaWVsZCB7XG4gIHR5cGVzID0gbmV3IE1hcDxzdHJpbmcsIFZhbGlkYXRvckZ1bmN0aW9uIHwgZmFsc2U+KCk7XG4gIGZvcm1hdHMgPSBuZXcgTWFwPHN0cmluZywgRm9ybWF0RnVuY3Rpb24gfCBmYWxzZT4oKTtcbiAga2V5d29yZHMgPSBuZXcgTWFwPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24gfCBmYWxzZT4oKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBmb3IgKGNvbnN0IHR5cGUgb2YgT2JqZWN0LmtleXMoVHlwZXMpKSB7XG4gICAgICB0aGlzLmFkZFR5cGUodHlwZSwgVHlwZXNbdHlwZV0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5d29yZCBvZiBPYmplY3Qua2V5cyhrZXl3b3JkcykpIHtcbiAgICAgIGlmIChrZXl3b3Jkc1trZXl3b3JkXSkge1xuICAgICAgICB0aGlzLmFkZEtleXdvcmQoa2V5d29yZCwga2V5d29yZHNba2V5d29yZF0gYXMgVmFsaWRhdG9yRnVuY3Rpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZm9ybWF0IG9mIE9iamVjdC5rZXlzKEZvcm1hdHMpKSB7XG4gICAgICBpZiAoRm9ybWF0c1tmb3JtYXRdKSB7XG4gICAgICAgIHRoaXMuYWRkRm9ybWF0KGZvcm1hdCwgRm9ybWF0c1tmb3JtYXRdIGFzIEZvcm1hdEZ1bmN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZGRUeXBlKG5hbWU6IHN0cmluZywgdmFsaWRhdG9yOiBWYWxpZGF0b3JGdW5jdGlvbikge1xuICAgIHRoaXMudHlwZXMuc2V0KG5hbWUsIHZhbGlkYXRvcik7XG4gIH1cblxuICBhZGRGb3JtYXQobmFtZTogc3RyaW5nLCB2YWxpZGF0b3I6IEZvcm1hdEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5mb3JtYXRzLnNldChuYW1lLCB2YWxpZGF0b3IpO1xuICB9XG5cbiAgYWRkS2V5d29yZChuYW1lOiBzdHJpbmcsIHZhbGlkYXRvcjogVmFsaWRhdG9yRnVuY3Rpb24pIHtcbiAgICB0aGlzLmtleXdvcmRzLnNldChuYW1lLCB2YWxpZGF0b3IpO1xuICB9XG5cbiAgY29tcGlsZShzY2hlbWE6IGFueSk6IFZhbGlkYXRvciB7XG4gICAgY29uc3QgY29tcGlsZWRTY2hlbWEgPSB0aGlzLmNvbXBpbGVTY2hlbWEoc2NoZW1hLCAnIycpO1xuXG4gICAgY29uc3QgdmFsaWRhdGU6IFZhbGlkYXRvciA9IChkYXRhOiBhbnkpID0+IHRoaXMudmFsaWRhdGUoY29tcGlsZWRTY2hlbWEsIGRhdGEpO1xuICAgIHZhbGlkYXRlLmNvbXBpbGVkU2NoZW1hID0gY29tcGlsZWRTY2hlbWE7XG5cbiAgICByZXR1cm4gdmFsaWRhdGU7XG4gIH1cblxuICBwcml2YXRlIGNvbXBpbGVTY2hlbWEoc2NoZW1hOiBQYXJ0aWFsPENvbXBpbGVkU2NoZW1hPiB8IGFueSwgcG9pbnRlcik6IENvbXBpbGVkU2NoZW1hIHtcbiAgICBpZiAoIWlzT2JqZWN0KHNjaGVtYSkpIHtcbiAgICAgIGlmIChzY2hlbWEgPT09IHRydWUpIHtcbiAgICAgICAgc2NoZW1hID0ge1xuICAgICAgICAgIGFueU9mOiBbeyB0eXBlOiAnc3RyaW5nJyB9LCB7IHR5cGU6ICdudW1iZXInIH0sIHsgdHlwZTogJ2Jvb2xlYW4nIH0sIHsgdHlwZTogJ2FycmF5JyB9LCB7IHR5cGU6ICdvYmplY3QnIH0sIHsgdHlwZTogJ251bGwnIH1dLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChzY2hlbWEgPT09IGZhbHNlKSB7XG4gICAgICAgIHNjaGVtYSA9IHtcbiAgICAgICAgICBvbmVPZjogW10sXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlbWEgPSB7XG4gICAgICAgICAgb25lT2Y6IFtzY2hlbWFdLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvbXBpbGVkU2NoZW1hOiBDb21waWxlZFNjaGVtYSA9IHt9O1xuXG4gICAgaWYgKCd0eXBlJyBpbiBzY2hlbWEpIHtcbiAgICAgIGNvbnN0IHR5cGVzID0gQXJyYXkuaXNBcnJheShzY2hlbWEudHlwZSkgPyBzY2hlbWEudHlwZSA6IHNjaGVtYS50eXBlLnNwbGl0KCcsJykubWFwKCh0KSA9PiB0LnRyaW0oKSk7XG5cbiAgICAgIGNvbXBpbGVkU2NoZW1hLnR5cGVzID0gdHlwZXMubWFwKCh0eXBlKSA9PiB0aGlzLnR5cGVzLmdldCh0eXBlKSkuZmlsdGVyKCh2YWxpZGF0b3IpID0+IEJvb2xlYW4odmFsaWRhdG9yKSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgICAgaWYgKGtleSA9PT0gJ3R5cGUnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQga2V5d29yZFZhbGlkYXRvciA9IHRoaXMua2V5d29yZHMuZ2V0KGtleSk7XG4gICAgICBpZiAoa2V5d29yZFZhbGlkYXRvcikge1xuICAgICAgICBjb21waWxlZFNjaGVtYS52YWxpZGF0b3JzID0gY29tcGlsZWRTY2hlbWEudmFsaWRhdG9ycyB8fCBbXTtcbiAgICAgICAgY29tcGlsZWRTY2hlbWEudmFsaWRhdG9ycy5wdXNoKGtleXdvcmRWYWxpZGF0b3IpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc1NjaGVtYUxpa2Uoc2NoZW1hW2tleV0pKSB7XG4gICAgICAgIGNvbXBpbGVkU2NoZW1hW2tleV0gPSB0aGlzLmNvbXBpbGVTY2hlbWEoc2NoZW1hW2tleV0sIGAke3BvaW50ZXJ9LyR7a2V5fWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNjaGVtYVtrZXldKSkge1xuICAgICAgICBjb21waWxlZFNjaGVtYVtrZXldID0gc2NoZW1hW2tleV0ubWFwKChzdWJTY2hlbWEsIGluZGV4KSA9PlxuICAgICAgICAgIHRoaXMuaXNTY2hlbWFMaWtlKHN1YlNjaGVtYSkgPyB0aGlzLmNvbXBpbGVTY2hlbWEoc3ViU2NoZW1hLCBgJHtwb2ludGVyfS8ke2tleX0vJHtpbmRleH1gKSA6IHN1YlNjaGVtYVxuICAgICAgICApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzT2JqZWN0KHNjaGVtYVtrZXldKSkge1xuICAgICAgICBjb21waWxlZFNjaGVtYVtrZXldID0gdGhpcy5jb21waWxlU2NoZW1hKHNjaGVtYVtrZXldLCBgJHtwb2ludGVyfS8ke2tleX1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbXBpbGVkU2NoZW1hW2tleV0gPSBzY2hlbWFba2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tcGlsZWRTY2hlbWE7XG4gIH1cblxuICB2YWxpZGF0ZShzY2hlbWE6IENvbXBpbGVkU2NoZW1hLCBkYXRhOiBhbnkpOiBSZXN1bHQge1xuICAgIGlmIChzY2hlbWEudHlwZXMpIHtcbiAgICAgIGxldCB0eXBlVmFsaWQgPSBmYWxzZTtcbiAgICAgIGZvciAobGV0IHR5cGUgb2Ygc2NoZW1hLnR5cGVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHR5cGUoc2NoZW1hLCBkYXRhLCBzY2hlbWEucG9pbnRlciwgdGhpcyk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgIHR5cGVWYWxpZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0eXBlVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEludmFsaWQgdHlwZWAsIHNjaGVtYS5wb2ludGVyKSxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzY2hlbWEudmFsaWRhdG9ycykge1xuICAgICAgZm9yIChsZXQgdmFsaWRhdG9yIG9mIHNjaGVtYS52YWxpZGF0b3JzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvcihzY2hlbWEsIGRhdGEsIHNjaGVtYS5wb2ludGVyLCB0aGlzKTtcblxuICAgICAgICBpZiAoIXJlc3VsdC52YWxpZCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICAgIGRhdGEsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgaXNTY2hlbWFPcktleXdvcmRQcmVzZW50KHN1YlNjaGVtYTogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKCd0eXBlJyBpbiBzdWJTY2hlbWEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZvciAobGV0IHN1YktleSBpbiBzdWJTY2hlbWEpIHtcbiAgICAgIGlmICh0aGlzLmtleXdvcmRzLmhhcyhzdWJLZXkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpc1NjaGVtYUxpa2Uoc3ViU2NoZW1hOiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNPYmplY3Qoc3ViU2NoZW1hKSAmJiB0aGlzLmlzU2NoZW1hT3JLZXl3b3JkUHJlc2VudChzdWJTY2hlbWEpO1xuICB9XG5cbiAgaXNDb21waWxlZFNjaGVtYShzdWJTY2hlbWE6IGFueSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc09iamVjdChzdWJTY2hlbWEpICYmICgndmFsaWRhdG9ycycgaW4gc3ViU2NoZW1hIHx8ICd0eXBlcycgaW4gc3ViU2NoZW1hKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiK0tBQUFBLEcsRUFBQSx3Q0FBQUMsRUFBQUMsR0FBQSxJQUFJQyxFQUFrQix1Q0FFbEJDLEVBQWlCLG1CQUNqQkMsRUFBaUIsS0FDakJDLEVBQVMsT0FDVEMsRUFBa0Isa0JBQ2xCQyxFQUFlLDBDQTRFbkJOLEVBQU9ELFFBQXlCLGdCQUFJLENBQ2xDRSxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNGLEcsNEVDekZhQyxFQUFOLGNBQThCQyxNQUNuQ0MsS0FDQUMsUUFDQUMsUUFDQUMsTUFDQUMsS0FFQUMsWUFBWUgsRUFBaUJELEdBQzNCSyxNQUFNSixHQUNOSyxLQUFLTixRQUFVQSxDQUNqQixHQU9LLFNBQVNPLEVBQVVDLEVBQXVDQyxHQUMvRCxHQUFJQyxNQUFNQyxRQUFRSCxJQUFRRSxNQUFNQyxRQUFRRixHQUFRLENBQzlDLEdBQUlELEVBQUlJLFNBQVdILEVBQU1HLE9BQ3ZCLE9BQU8sRUFHVCxRQUFTQyxFQUFJLEVBQUdBLEVBQUlMLEVBQUlJLE9BQVFDLElBQzlCLElBQUtOLEVBQVVDLEVBQUlLLEdBQUlKLEVBQU1JLElBQzNCLE9BQU8sRUFJWCxPQUFPLENBQ1QsQ0FFQSxHQUFtQixpQkFBUkwsR0FBcUMsaUJBQVZDLEVBQW9CLENBQ3hELEdBQVksT0FBUkQsR0FBMEIsT0FBVkMsRUFDbEIsT0FBT0QsSUFBUUMsRUFHakIsTUFBTUssRUFBT0MsT0FBT0QsS0FBS04sR0FDekIsR0FBSU0sRUFBS0YsU0FBV0csT0FBT0QsS0FBS0wsR0FBT0csT0FDckMsT0FBTyxFQUdULFVBQVdJLEtBQU9GLEVBQ2hCLElBQUtQLEVBQVVDLEVBQUlRLEdBQU1QLEVBQU1PLElBQzdCLE9BQU8sRUFJWCxPQUFPLENBQ1QsQ0FFQSxPQUFPUixJQUFRQyxDQUNqQixDQUVPLFNBQVNRLEVBQVNDLEdBQ3ZCLE1BQXVCLGlCQUFUQSxHQUE4QixPQUFUQSxJQUFrQlIsTUFBTUMsUUFBUU8sRUFDckUsQ0N4REEsSUFBQUMsRSx5UUFBd0JDLENBQUFoQyxLQUtsQmlDLEVBQVUsQ0FDZCxZQUFhLHFGQUNiQyxLQUFNLDZEQUNOQyxJQUFLLG9DQUNMQyxNQUNFLHVJQUNGQyxTQUFVLCtFQUNWQyxLQUFNLDRCQUNOLGVBQWdCLHNCQUNoQix3QkFBeUIsb0NBR2RDLEVBQWtELENBQzdELFlBQWNULEdBQ1osTUFBTVUsRUFBZ0JWLEVBQUtXLGNBQzNCLElBQUtSLEVBQVEsYUFBYVMsS0FBS0YsR0FDN0IsT0FBTyxFQUdULE1BQU1GLEVBQU8sSUFBSUssS0FBS0gsR0FDdEIsT0FBUUksTUFBTU4sRUFBS08sVUFDckIsRUFDQVYsSUFBSUwsR0FDS0csRUFBUUUsSUFBSU8sS0FBS1osR0FFMUJNLE1BQU1OLEdBQ0osSUFBS0csRUFBUUcsTUFBTU0sS0FBS1osR0FDdEIsT0FBTyxFQUdULE1BQU9nQixFQUFPQyxHQUFVakIsRUFBS2tCLE1BQU0sS0FFbkMsUUFBSUYsRUFBTXRCLE9BQVMsS0FBOEIsSUFBeEJzQixFQUFNRyxRQUFRLE9BQTZCLE1BQWJILEVBQU0sSUFBMEMsTUFBNUJBLEVBQU1BLEVBQU10QixPQUFTLE9BSTVGdUIsRUFBT3ZCLE9BQVMsTUFBZ0MsSUFBekJ1QixFQUFPRSxRQUFRLE9BQThCLE1BQWRGLEVBQU8sSUFBNEMsTUFBOUJBLEVBQU9BLEVBQU92QixPQUFTLEdBS3hHLEVBQ0EwQixNQUFBLEVBQU1uQixFQUFBb0IsU0FBWSxDQUFFQyxRQUFTLElBQzdCQyxNQUFBLEVBQU10QixFQUFBb0IsU0FBWSxDQUFFQyxRQUFTLElBRTdCZixTQUFTUCxHQUNBRyxFQUFRSSxTQUFTSyxLQUFLWixHQUUvQlEsS0FBS1IsR0FDaUIsaUJBQVRBLEtBSXFCLElBQTVCRyxFQUFRSyxLQUFLSSxLQUFLWixLQUlkYyxNQUFNLElBQUlELEtBQUtiLEdBQU1lLFlBRS9CUyxNQUFNeEIsR0FDSixJQUVFLE9BREEsSUFBSXlCLE9BQU96QixJQUNKLENBQ1QsT0FBUzBCLEdBQ1AsT0FBTyxDQUNULENBQ0YsRUFDQSxlQUFlMUIsR0FDQSxLQUFUQSxHQUlHRyxFQUFRLGdCQUFnQlMsS0FBS1osR0FFdEMsd0JBQXdCQSxHQUNULEtBQVRBLEdBSUdHLEVBQVEseUJBQXlCUyxLQUFLWixHQUUvQ0ksS0FBS0osR0FDSUcsRUFBUUMsS0FBS1EsS0FBS1osR0FJM0IyQixVQUFVLEVBQ1YsYUFBYSxFQUNiLGdCQUFnQixFQUNoQkMsTUFBTSxFQUNOLGlCQUFpQixFQUNqQkMsS0FBSyxFQUNMLGlCQUFpQixFQUNqQixnQkFBZ0IsR0MvRkxDLEVBQTJDLENBQ3REQyxPQUFBLENBQU9DLEVBQVFoQyxFQUFNbEIsSUFDZmlCLEVBQVNDLEdBQ0osQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxLQUNQbEMsUUFJRyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix3QkFBeUJHLEdBQ3BEa0IsUUFHSm1DLE1BQU1ILEVBQVFoQyxFQUFNbEIsR0FDbEIsR0FBSVUsTUFBTUMsUUFBUU8sR0FDaEIsTUFBTyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLEtBQ1BsQyxRQUlKLEdBQW9CLGlCQUFUQSxHQUE4QixPQUFUQSxHQUFpQixXQUFZQSxFQUFNLENBRWpFLE1BQU1KLEVBQU9DLE9BQU9ELEtBQUtJLEdBQ3pCLE9BQUlKLEVBQUtGLE9BQVMsSUFBa0IsTUFBWkUsRUFBSyxJQUFjQSxFQUFLRixTQUFXTSxFQUFLTixRQUN2RCxDQUNMdUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix1QkFBd0JHLEdBQ25Ea0IsUUFJRyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLEtBQ1BsQyxPQUVKLENBRUEsTUFBTyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix1QkFBd0JHLEdBQ25Ea0IsT0FFSixFQUNBb0MsT0FBQSxDQUFPSixFQUFRaEMsRUFBTWxCLElBQ0MsaUJBQVRrQixFQUNGLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sS0FDUGxDLFFBSUcsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsdUJBQXdCRyxHQUNuRGtCLFFBR0pxQyxPQUFBLENBQU9MLEVBQVFoQyxFQUFNbEIsSUFDQyxpQkFBVGtCLEVBQ0YsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxLQUNQbEMsUUFJRyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix1QkFBd0JHLEdBQ25Ea0IsUUFHSnNDLFFBQUEsQ0FBUU4sRUFBUWhDLEVBQU1sQixJQUNBLGlCQUFUa0IsR0FBcUJ1QyxPQUFPQyxVQUFVeEMsR0FDeEMsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxLQUNQbEMsUUFJRyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix5QkFBMEJHLEdBQ3JEa0IsUUFHSnlDLFFBQUEsQ0FBUVQsRUFBUWhDLEVBQU1sQixJQUVBLGtCQUFUa0IsRUFDRixDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLEtBQ1BsQyxRQUlHLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLHdCQUF5QkcsR0FDcERrQixRQUdKMEMsS0FBQSxDQUFLVixFQUFRaEMsRUFBTWxCLElBQ0osT0FBVGtCLEVBQ0ssQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxLQUNQbEMsUUFJRyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixtQkFBb0JHLEdBQy9Da0IsU0N0SE8yQyxFQUFzRCxJQ0pNLENBRXZFQyxTQUFTWixFQUFRaEMsRUFBTWxCLEdBQ3JCLElBQUtpQixFQUFTQyxHQUNaLE1BQU8sQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxLQUNQbEMsUUFJSixRQUFTTCxFQUFJLEVBQUdBLEVBQUlxQyxFQUFPWSxTQUFTbEQsT0FBUUMsSUFBSyxDQUMvQyxNQUFNRyxFQUFNa0MsRUFBT1ksU0FBU2pELEdBQzVCLElBQUtLLEVBQUs2QyxlQUFlL0MsR0FDdkIsTUFBTyxDQUNMbUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix1QkFBd0IsR0FBR0csS0FBV2dCLEtBQ2pFRSxPQUdOLENBRUEsTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxPQUNyQyxFQUVBOEMsV0FBV2QsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDaEMsSUFBS2hELEVBQVNDLEdBQ1osTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUFJZ0QsRUFBWSxJQUFLaEQsR0FDckIsTUFBTUosRUFBT0MsT0FBT0QsS0FBS29DLEVBQU9jLFlBQ2hDLFVBQVdoRCxLQUFPRixFQUFNLENBQ3RCLE1BQU1xRCxFQUFPakQsRUFBS0YsR0FDbEIsUUFBb0IsSUFBVG1ELEVBQXNCLENBQy9CLE1BQU1DLEVBQWFsQixFQUFPYyxXQUFXaEQsR0FDakNDLEVBQVNtRCxJQUFlLFlBQWFBLElBQ3ZDRixFQUFVbEQsR0FBT29ELEVBQVdDLFNBRTlCLFFBQ0YsQ0FFQSxHQUFzQyxrQkFBM0JuQixFQUFPYyxXQUFXaEQsR0FBb0IsQ0FDL0MsSUFBK0IsSUFBM0JrQyxFQUFPYyxXQUFXaEQsR0FDcEIsTUFBTyxDQUNMbUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQiwwQkFBMkIsR0FBR0csS0FBV2dCLEtBQ3BFRSxRQUdKLFFBQ0YsQ0FFQSxNQUFNb0QsRUFBa0JMLEVBQXFCTSxTQUFTckIsRUFBT2MsV0FBV2hELEdBQU1tRCxHQUk5RSxHQUZBRCxFQUFVbEQsR0FBT3NELEVBQWdCcEQsTUFFNUJvRCxFQUFnQm5CLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFPQyxNQUFPa0IsRUFBZ0JsQixNQUFPbEMsS0FBTWdELEVBRS9ELENBRUEsTUFBTyxDQUFFZixPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLEtBQU1nRCxFQUMzQyxFQUVBTSxjQUFBLENBQWN0QixFQUFRaEMsRUFBTWxCLEtBQ3JCaUIsRUFBU0MsSUFBU0gsT0FBT0QsS0FBS0ksR0FBTU4sUUFBVXNDLEVBQU9zQixjQUNqRCxDQUFFckIsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUc5QixDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixpQ0FBa0NHLEdBQzdEa0IsUUFJSnVELGNBQUEsQ0FBY3ZCLEVBQVFoQyxFQUFNbEIsS0FDckJpQixFQUFTQyxJQUFTSCxPQUFPRCxLQUFLSSxHQUFNTixRQUFVc0MsRUFBT3VCLGNBQ2pELENBQUV0QixPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBRzlCLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLGdDQUFpQ0csR0FDNURrQixRQUlKd0QscUJBQXFCeEIsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDMUMsSUFBS2hELEVBQVNDLEdBQ1osTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUFJZ0QsRUFBWSxJQUFLaEQsR0FDckIsTUFBTUosRUFBT0MsT0FBT0QsS0FBS0ksR0FDbkJ5RCxFQUFtQlYsRUFBcUJVLGlCQUFpQnpCLEVBQU93QixzQkFDdEUsVUFBVzFELEtBQU9GLEVBQ2hCLElBQUlvQyxFQUFPYyxhQUFjZCxFQUFPYyxXQUFXRCxlQUFlL0MsR0FBMUQsQ0FJQSxHQUFJa0MsRUFBTzBCLGtCQUFtQixDQUM1QixJQUFJQyxHQUFRLEVBQ1osVUFBV0MsS0FBVzVCLEVBQU8wQixrQkFDM0IsR0FBSSxJQUFJakMsT0FBT21DLEVBQVMsS0FBS2hELEtBQUtkLEdBQU0sQ0FDdEM2RCxHQUFRLEVBQ1IsS0FDRixDQUVGLEdBQUlBLEVBQ0YsUUFFSixDQUVBLElBQW9DLElBQWhDM0IsRUFBT3dCLHFCQUNULE1BQU8sQ0FDTHZCLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsMEJBQTJCLEdBQUdHLEtBQVdnQixLQUNwRUUsUUFLSixHQUFJeUQsRUFBa0IsQ0FDcEIsTUFBTUwsRUFBa0JMLEVBQXFCTSxTQUFTckIsRUFBT3dCLHFCQUFzQlIsRUFBVWxELElBSTdGLEdBRkFrRCxFQUFVbEQsR0FBT3NELEVBQWdCcEQsTUFFNUJvRCxFQUFnQm5CLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFPQyxNQUFPa0IsRUFBZ0JsQixNQUFPbEMsS0FBTWdELEVBRS9ELENBaENBLENBbUNGLE1BQU8sQ0FBRWYsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxLQUFNZ0QsRUFDM0MsRUFFQVUsa0JBQWtCMUIsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDdkMsSUFBS2hELEVBQVNDLEdBQ1osTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUFJZ0QsRUFBWSxJQUFLaEQsR0FDckIsTUFBTTZELEVBQVdoRSxPQUFPRCxLQUFLb0MsRUFBTzBCLG1CQUNwQyxVQUFXRSxLQUFXQyxFQUFVLENBQzlCLE1BQU1yQyxFQUFRLElBQUlDLE9BQU9tQyxFQUFTLEtBRWxDLEdBQWlELGtCQUF0QzVCLEVBQU8wQixrQkFBa0JFLEdBQXdCLENBQzFELElBQTBDLElBQXRDNUIsRUFBTzBCLGtCQUFrQkUsR0FDM0IsVUFBVzlELEtBQU9rRCxFQUNoQixHQUFJeEIsRUFBTVosS0FBS2QsR0FDYixNQUFPLENBQ0xtQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLDBCQUEyQixHQUFHRyxLQUFXZ0IsS0FDcEVFLEtBQU1nRCxHQUtkLFFBQ0YsQ0FFQSxNQUFNcEQsRUFBT0MsT0FBT0QsS0FBS29ELEdBQ3pCLFVBQVdsRCxLQUFPRixFQUNoQixHQUFJNEIsRUFBTVosS0FBS2QsR0FBTSxDQUNuQixNQUFNc0QsRUFBa0JMLEVBQXFCTSxTQUFTckIsRUFBTzBCLGtCQUFrQkUsR0FBVVosRUFBVWxELElBSW5HLEdBRkFrRCxFQUFVbEQsR0FBT3NELEVBQWdCcEQsTUFFNUJvRCxFQUFnQm5CLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFPQyxNQUFPa0IsRUFBZ0JsQixNQUFPbEMsS0FBTWdELEVBRS9ELENBRUosQ0FFQSxNQUFPLENBQUVmLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEVBQzNDLEVBRUFjLGNBQWM5QixFQUFRaEMsRUFBTWxCLEVBQVNpRSxHQUNuQyxJQUFLaEQsRUFBU0MsR0FDWixNQUFPLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLEdBQW9DLGtCQUF6QmdDLEVBQU84QixnQkFDYSxJQUF6QjlCLEVBQU84QixlQUEyQmpFLE9BQU9ELEtBQUtJLEdBQU1OLE9BQVMsRUFDL0QsTUFBTyxDQUNMdUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixpQ0FBa0NHLEdBQzdEa0IsUUFLTixJQUFJZ0QsRUFBWSxJQUFLaEQsR0FFckIsR0FBSStDLEVBQXFCVSxpQkFBaUJ6QixFQUFPOEIsZUFDL0MsUUFBU2hFLEtBQU9rRCxFQUFXLENBQ3pCLE1BQU1JLEVBQWtCTCxFQUFxQk0sU0FBU3JCLEVBQU84QixjQUFlaEUsR0FFNUUsSUFBS3NELEVBQWdCbkIsTUFDbkIsTUFBTyxDQUFFQSxPQUFPLEVBQU9DLE1BQU9rQixFQUFnQmxCLE1BQU9sQyxLQUFNZ0QsRUFFL0QsQ0FHRixNQUFPLENBQUVmLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEVBQzNDLEVBRUFHLFNBQVMsRUFDVFksTUFBTSxFQUNOQyxhQUFhLEVBQ2JDLEtBQUssRUFDTEMsU0FBUyxFQUNUQyxPQUFPLEVBQ1BDLFVBQVUsTUN4Tm9ELENBQzlEQyxNQUFNckMsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDM0IsSUFBS3ZELE1BQU1DLFFBQVFPLEdBQ2pCLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsTUFBTXNFLEVBQWN0QyxFQUFPcUMsTUFDckJFLEVBQWF2RSxFQUFLTixPQUV4QixHQUEyQixrQkFBaEI0RSxFQUNULE9BQW9CLElBQWhCQSxHQUF5QkMsRUFBYSxFQUNqQyxDQUNMdEMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix1QkFBd0JHLEdBQ25Ea0IsUUFJRyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxHQUFJUixNQUFNQyxRQUFRNkUsR0FBYyxDQUM5QixNQUFNRSxFQUFvQkYsRUFBWTVFLE9BQ2hDc0QsRUFBWSxJQUFJaEQsR0FDaEJ5RSxFQUFjQyxLQUFLQyxJQUFJSCxFQUFtQkQsR0FDaEQsUUFBUzVFLEVBQUksRUFBR0EsRUFBSThFLEVBQWE5RSxJQUFLLENBQ3BDLEdBQThCLGtCQUFuQjJFLEVBQVkzRSxHQUFrQixDQUN2QyxJQUF1QixJQUFuQjJFLEVBQVkzRSxTQUF3QyxJQUFqQnFELEVBQVVyRCxHQUMvQyxNQUFPLENBQ0xzQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLDRCQUE2QixHQUFHRyxLQUFXYSxLQUN0RUssS0FBTWdELEdBR1YsUUFDRixDQUVBLE1BQU1JLEVBQWtCTCxFQUFxQk0sU0FBU2lCLEVBQVkzRSxHQUFJcUQsRUFBVXJELElBSWhGLEdBRkFxRCxFQUFVckQsR0FBS3lELEVBQWdCcEQsTUFFMUJvRCxFQUFnQm5CLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFPQyxNQUFPa0IsRUFBZ0JsQixNQUFPbEMsS0FBTWdELEVBRS9ELENBRUEsTUFBTyxDQUFFZixPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLEtBQU1nRCxFQUMzQyxDQUVBLEdBQUlELEVBQXFCVSxpQkFBaUJhLEdBQ3hDLFFBQVMzRSxFQUFJLEVBQUdBLEVBQUk0RSxFQUFZNUUsSUFBSyxDQUNuQyxNQUFNaUYsRUFBa0I3QixFQUFxQk0sU0FBU2lCLEVBQWF0RSxFQUFLTCxJQUl4RSxHQUZBSyxFQUFLTCxHQUFLaUYsRUFBZ0I1RSxNQUVyQjRFLEVBQWdCM0MsTUFDbkIsTUFBTyxDQUFFQSxPQUFPLEVBQU9DLE1BQU8wQyxFQUFnQjFDLE1BQU9sQyxPQUV6RCxDQUdGLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsT0FDckMsRUFFQTZFLFNBQUEsQ0FBUzdDLEVBQVFoQyxFQUFNbEIsS0FDaEJVLE1BQU1DLFFBQVFPLElBQVNBLEVBQUtOLFFBQVVzQyxFQUFPNkMsU0FDekMsQ0FBRTVDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHOUIsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IscUJBQXNCRyxHQUNqRGtCLFFBSUo4RSxTQUFBLENBQVM5QyxFQUFRaEMsRUFBTWxCLEtBQ2hCVSxNQUFNQyxRQUFRTyxJQUFTQSxFQUFLTixRQUFVc0MsRUFBTzhDLFNBQ3pDLENBQUU3QyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBRzlCLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLG9CQUFxQkcsR0FDaERrQixRQUlKK0UsZ0JBQWdCL0MsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDckMsSUFBS3ZELE1BQU1DLFFBQVFPLEtBQVVnQyxFQUFPcUMsUUFBVTdFLE1BQU1DLFFBQVF1QyxFQUFPcUMsT0FDakUsTUFBTyxDQUFFcEMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUErQixJQUEzQmdDLEVBQU8rQyxnQkFDVCxPQUFJL0UsRUFBS04sT0FBU3NDLEVBQU9xQyxNQUFNM0UsT0FDdEIsQ0FDTHVDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsMkJBQTRCRyxHQUN2RGtCLFFBSUcsQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsR0FBSStDLEVBQXFCVSxpQkFBaUJ6QixFQUFPK0MsaUJBQWtCLENBQ2pFLE1BQU0vQixFQUFZLElBQUloRCxHQUN0QixRQUFTTCxFQUFJcUMsRUFBT3FDLE1BQU0zRSxPQUFRQyxFQUFJcUQsRUFBVXRELE9BQVFDLElBQUssQ0FDM0QsTUFBTXlELEVBQWtCTCxFQUFxQk0sU0FBU3JCLEVBQU8rQyxnQkFBaUIvQixFQUFVckQsSUFDeEYsSUFBS3lELEVBQWdCbkIsTUFDbkIsTUFBTyxDQUFFQSxPQUFPLEVBQU9DLE1BQU9rQixFQUFnQmxCLE1BQU9sQyxLQUFNZ0QsR0FFN0RBLEVBQVVyRCxHQUFLeUQsRUFBZ0JwRCxJQUNqQyxDQUNBLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEVBQzNDLENBRUEsTUFBTyxDQUFFZixPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLE9BQ3JDLEVBRUFnRixZQUFZaEQsRUFBUWhDLEVBQU1sQixHQUN4QixJQUFLVSxNQUFNQyxRQUFRTyxLQUFVZ0MsRUFBT2dELFlBQ2xDLE1BQU8sQ0FBRS9DLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsTUFBTWlGLEVBQVMsSUFBSUMsSUFFbkIsVUFBV0MsS0FBUW5GLEVBQU0sQ0FDdkIsSUFBSW9GLEVBYUosR0FURUEsRUFEa0IsaUJBQVRELEVBQ0MsS0FBS0EsSUFHTnBGLEVBQVNvRixHQUNSLEtBQUtFLEtBQUtDLFVBQVV6RixPQUFPMEYsWUFBWTFGLE9BQU8yRixRQUFRTCxHQUFNTSxLQUFLLEVBQUVDLElBQUtDLEtBQU9ELEVBQUVFLGNBQWNELFFBRS9GTixLQUFLQyxVQUFVSCxHQUd2QkYsRUFBT1ksSUFBSVQsR0FDYixNQUFPLENBQ0xuRCxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLDZCQUE4QkcsR0FDekRrQixRQUdGaUYsRUFBT2EsSUFBSVYsRUFFZixDQUVBLE1BQU8sQ0FBRW5ELE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsT0FDckMsTUN4SitELENBQy9EK0YsVUFBQSxDQUFVL0QsRUFBUWhDLEVBQU1sQixJQUNGLGlCQUFUa0IsR0FBcUJBLEVBQUtOLFFBQVVzQyxFQUFPK0QsVUFDN0MsQ0FBRTlELE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHOUIsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0Isc0JBQXVCRyxHQUNsRGtCLFFBSUpnRyxVQUFBLENBQVVoRSxFQUFRaEMsRUFBTWxCLElBQ0YsaUJBQVRrQixHQUFxQkEsRUFBS04sUUFBVXNDLEVBQU9nRSxVQUM3QyxDQUFFL0QsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUc5QixDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixxQkFBc0JHLEdBQ2pEa0IsUUFJSjRELFFBQVE1QixFQUFRaEMsRUFBTWxCLEdBQ3BCLEdBQW9CLGlCQUFUa0IsRUFDVCxNQUFPLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLE1BQU1pRyxFQUFnQixJQUFJeEUsT0FBT08sRUFBTzRCLFFBQVMsS0FFakQsR0FBSXFDLGFBQXlCeEUsU0FBVyxFQUN0QyxNQUFPLENBQ0xRLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsNENBQTZDRyxHQUN4RWtCLFFBSUosTUFBTWlDLEVBQVFnRSxFQUFjckYsS0FBS1osR0FFakMsTUFBTyxDQUNMaUMsUUFDQUMsTUFBT0QsRUFBUSxLQUFPLElBQUl0RCxFQUFnQixnQ0FBaUNHLEdBQzNFa0IsT0FFSixFQUVBa0csT0FBT2xFLEVBQVFoQyxFQUFNbEIsRUFBU3FILEdBQzVCLEdBQW9CLGlCQUFUbkcsRUFDVCxNQUFPLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLE1BQU1vRyxFQUFpQkQsRUFBZUUsUUFBUUMsSUFBSXRFLEVBQU9rRSxRQUN6RCxJQUF1QixJQUFuQkUsRUFDRixNQUFPLENBQUVuRSxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLEdBQThCLG1CQUFuQm9HLEVBQStCLENBQ3hDLE1BQU1uRSxFQUFRbUUsRUFBZXBHLEdBRTdCLE1BQU8sQ0FDTGlDLFFBQ0FDLE1BQU9ELEVBQVEsS0FBTyxJQUFJdEQsRUFBZ0IsZ0NBQWdDcUQsRUFBT2tFLFNBQVVwSCxHQUMzRmtCLE9BRUosQ0FFQSxNQUFPLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLGtCQUFrQnFELEVBQU9rRSxTQUFVcEgsR0FDOURrQixPQUVKLEVBRUF1RyxLQUFLdkUsRUFBUWhDLEVBQU1sQixHQUVqQixNQUFNVyxFQUFVRCxNQUFNQyxRQUFRTyxHQUN4QkQsRUFBMkIsaUJBQVRDLEdBQThCLE9BQVRBLEVBRTdDLFFBQVNMLEVBQUksRUFBR0EsRUFBSXFDLEVBQU91RSxLQUFLN0csT0FBUUMsSUFBSyxDQUMzQyxNQUFNNkcsRUFBV3hFLEVBQU91RSxLQUFLNUcsR0FHN0IsR0FBSTZHLElBQWF4RyxFQUNmLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFJckMsSUFBS1AsR0FBV0QsTUFBTUMsUUFBUStHLElBQWV6RyxHQUFnQyxpQkFBYnlHLEdBQXNDLE9BQWJBLElBQ25GbkgsRUFBVW1ILEVBQVV4RyxHQUN0QixNQUFPLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLE9BR3pDLENBRUEsTUFBTyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix3QkFBd0JxRCxFQUFPdUUsS0FBS0UsS0FBSyxRQUFTM0gsR0FDN0VrQixPQUVKLE1DdkcrRCxDQUMvRDBHLFFBQVExRSxFQUFRaEMsRUFBTWxCLEVBQVNpRSxHQUM3QixHQUFvQixpQkFBVC9DLEVBQ1QsTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUFJMkUsRUFBTTNDLEVBQU8wRSxRQUNzQixpQkFBNUIxRSxFQUFPMkUsaUJBQ2hCaEMsRUFBTTNDLEVBQU8yRSxpQkFBbUIsT0FDSyxJQUE1QjNFLEVBQU8yRSxtQkFDaEJoQyxHQUFPLE9BR1QsTUFBTTFDLEVBQVFqQyxHQUFRMkUsRUFFdEIsTUFBTyxDQUNMMUMsUUFDQUMsTUFBT0QsRUFBUSxLQUFPLElBQUl0RCxFQUFnQixzQkFBdUJHLEdBQ2pFa0IsT0FFSixFQUVBNEcsUUFBUTVFLEVBQVFoQyxFQUFNbEIsRUFBU2lFLEdBQzdCLEdBQW9CLGlCQUFUL0MsRUFDVCxNQUFPLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLElBQUk2RyxFQUFNN0UsRUFBTzRFLFFBQ3NCLGlCQUE1QjVFLEVBQU84RSxpQkFDaEJELEVBQU03RSxFQUFPOEUsaUJBQW1CLE9BQ0ssSUFBNUI5RSxFQUFPOEUsbUJBQ2hCRCxHQUFPLE9BR1QsTUFBTTVFLEVBQVFqQyxHQUFRNkcsRUFFdEIsTUFBTyxDQUNMNUUsUUFDQUMsTUFBT0QsRUFBUSxLQUFPLElBQUl0RCxFQUFnQixvQkFBcUJHLEdBQy9Ea0IsT0FFSixFQUVBK0csV0FBVy9FLEVBQVFoQyxFQUFNbEIsR0FDdkIsR0FBb0IsaUJBQVRrQixFQUNULE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsTUFBTWdILEVBQVdoSCxFQUFPZ0MsRUFBTytFLFdBRy9CLElBQUtFLFNBQVNELEdBQ1osTUFBTyxDQUFFL0UsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxNQUFNa0gsRVBBSCxTQUF3QnhCLEVBQUdDLEVBQUd3QixFQUFVLE9BQzdDLE9BQU96QyxLQUFLMEMsSUFBSTFCLEVBQUlDLElBQU13QixFQUFVekMsS0FBS21DLElBQUluQyxLQUFLMEMsSUFBSTFCLEdBQUloQixLQUFLMEMsSUFBSXpCLEdBQ3JFLENPRnlCMEIsQ0FBZUwsRUFBVXRDLEtBQUs0QyxNQUFNTixJQUV6RCxNQUFPLENBQ0wvRSxNQUFPaUYsRUFDUGhGLE1BQU9nRixFQUFlLEtBQU8sSUFBSXZJLEVBQWdCLDhCQUErQkcsR0FDaEZrQixPQUVKLEVBRUEyRyxpQkFBaUIzRSxFQUFRaEMsRUFBTWxCLEdBQzdCLEdBQW9CLGlCQUFUa0IsR0FBd0QsaUJBQTVCZ0MsRUFBTzJFLGtCQUFpQyxZQUFhM0UsRUFDMUYsTUFBTyxDQUFFQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBR3JDLE1BQU1pQyxFQUFRakMsRUFBT2dDLEVBQU8yRSxpQkFBbUIsTUFFL0MsTUFBTyxDQUNMMUUsUUFDQUMsTUFBT0QsRUFBUSxLQUFPLElBQUl0RCxFQUFnQixzQkFBdUJHLEdBQ2pFa0IsT0FFSixFQUVBOEcsaUJBQWlCOUUsRUFBUWhDLEVBQU1sQixHQUM3QixHQUFvQixpQkFBVGtCLEdBQXdELGlCQUE1QmdDLEVBQU84RSxrQkFBaUMsWUFBYTlFLEVBQzFGLE1BQU8sQ0FBRUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxNQUFNaUMsRUFBUWpDLEVBQU9nQyxFQUFPOEUsaUJBQW1CLE1BRS9DLE1BQU8sQ0FDTDdFLFFBQ0FDLE1BQU9ELEVBQVEsS0FBTyxJQUFJdEQsRUFBZ0Isb0JBQXFCRyxHQUMvRGtCLE9BRUosTUMxRjhELENBQzlEdUgsU0FBQSxDQUFTdkYsRUFBUWhDLEVBQU1sQixJQUNqQmtELEVBQU91RixVQUFxQixPQUFUdkgsRUFDZCxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixpQ0FBa0NHLEdBQzdEa0IsUUFJRyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQ3dILE1BQU14RixFQUFRaEMsRUFBTWxCLEVBQVNpRSxHQUMzQixJQUFJQyxFQUFZaEQsRUFDaEIsUUFBU0wsRUFBSSxFQUFHQSxFQUFJcUMsRUFBT3dGLE1BQU05SCxPQUFRQyxJQUN2QyxHQUFJSSxFQUFTaUMsRUFBT3dGLE1BQU03SCxJQUFLLENBQzdCLE1BQU15RCxFQUFrQkwsRUFBcUJNLFNBQVNyQixFQUFPd0YsTUFBTTdILEdBQUlxRCxHQUV2RSxJQUFLSSxFQUFnQm5CLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFPQyxNQUFPa0IsRUFBZ0JsQixNQUFPbEMsS0FBTWdELEdBRzdEQSxFQUFZSSxFQUFnQnBELElBQzlCLEtBQU8sQ0FDTCxHQUErQixrQkFBcEJnQyxFQUFPd0YsTUFBTTdILEdBQWtCLENBQ3hDLEdBQUk4SCxRQUFRekgsS0FBVWdDLEVBQU93RixNQUFNN0gsR0FDakMsTUFBTyxDQUNMc0MsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQix3Q0FBeUNHLEdBQ3BFa0IsS0FBTWdELEdBR1YsUUFDRixDQUVBLEdBQUloRCxJQUFTZ0MsRUFBT3dGLE1BQU03SCxHQUN4QixNQUFPLENBQ0xzQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLHdDQUF5Q0csR0FDcEVrQixLQUFNZ0QsRUFHWixDQUdGLE1BQU8sQ0FBRWYsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxLQUFNZ0QsRUFDM0MsRUFFQTBFLE1BQU0xRixFQUFRaEMsRUFBTWxCLEVBQVNpRSxHQUMzQixJQUFJQyxFQUFZaEQsRUFFaEIsUUFBU0wsRUFBSSxFQUFHQSxFQUFJcUMsRUFBTzBGLE1BQU1oSSxPQUFRQyxJQUN2QyxHQUFJSSxFQUFTaUMsRUFBTzBGLE1BQU0vSCxJQUFLLENBQzdCLE1BQU1nSSxFQUFtQjVFLEVBQXFCTSxTQUFTckIsRUFBTzBGLE1BQU0vSCxHQUFJcUQsR0FFeEUsR0FEQUEsRUFBWTJFLEVBQWlCM0gsS0FDekIySCxFQUFpQjFGLE1BQ25CLE1BQU8sQ0FBRUEsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxLQUFNZ0QsRUFFN0MsS0FBTyxDQUNMLEdBQStCLGtCQUFwQmhCLEVBQU8wRixNQUFNL0gsSUFDbEI4SCxRQUFRekgsS0FBVWdDLEVBQU8wRixNQUFNL0gsR0FDakMsTUFBTyxDQUFFc0MsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxLQUFNZ0QsR0FJN0MsR0FBSWhELElBQVNnQyxFQUFPMEYsTUFBTS9ILEdBQ3hCLE1BQU8sQ0FBRXNDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEVBRTdDLENBR0YsTUFBTyxDQUNMZixPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLGdEQUFpREcsR0FDNUVrQixPQUVKLEVBRUE0SCxNQUFNNUYsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDM0IsSUFBSThFLEVBQWEsRUFDYjdFLEVBQVloRCxFQUNoQixRQUFTTCxFQUFJLEVBQUdBLEVBQUlxQyxFQUFPNEYsTUFBTWxJLE9BQVFDLElBQ3ZDLEdBQUlJLEVBQVNpQyxFQUFPNEYsTUFBTWpJLElBQUssQ0FDN0IsTUFBTWdJLEVBQW1CNUUsRUFBcUJNLFNBQVNyQixFQUFPNEYsTUFBTWpJLEdBQUlxRCxHQUNwRTJFLEVBQWlCMUYsT0FDbkI0RixJQUVGN0UsRUFBWTJFLEVBQWlCM0gsSUFDL0IsS0FBTyxDQUNMLEdBQStCLGtCQUFwQmdDLEVBQU80RixNQUFNakksR0FBa0IsQ0FDcEM4SCxRQUFRekgsS0FBVWdDLEVBQU80RixNQUFNakksSUFDakNrSSxJQUVGLFFBQ0YsQ0FFSTdILElBQVNnQyxFQUFPNEYsTUFBTWpJLElBQ3hCa0ksR0FFSixDQUdGLE9BQW1CLElBQWZBLEVBQ0ssQ0FBRTVGLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEdBR3BDLENBQ0xmLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsK0NBQWdERyxHQUMzRWtCLEtBQU1nRCxFQUVWLEVBRUE4RSxhQUFhOUYsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDbEMsSUFBS2hELEVBQVNDLEdBQ1osTUFBTyxDQUFFaUMsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxRQUdyQyxJQUFJZ0QsRUFBWWhELEVBQ2hCLFVBQVdGLEtBQU9rQyxFQUFPOEYsYUFBYyxDQUNyQyxHQUFJaEksS0FBT0UsSUFBUyxFQUNsQixTQUdGLE1BQU0rSCxFQUFhL0YsRUFBTzhGLGFBQWFoSSxHQUN2QyxHQUFJTixNQUFNQyxRQUFRc0ksR0FBYSxDQUM3QixRQUFTcEksRUFBSSxFQUFHQSxFQUFJb0ksRUFBV3JJLE9BQVFDLElBQ3JDLEtBQU1vSSxFQUFXcEksS0FBTUssR0FDckIsTUFBTyxDQUNMaUMsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixjQUFjb0osRUFBV3BJLGdCQUFpQmIsR0FDckVrQixLQUFNZ0QsR0FJWixRQUNGLENBRUEsR0FBMEIsa0JBQWYrRSxFQUEwQixDQUNuQyxHQUFJQSxFQUNGLFNBRUYsTUFBTyxDQUNMOUYsT0FBTyxFQUNQQyxNQUFPLElBQUl2RCxFQUFnQixjQUFjbUIsZUFBa0JoQixHQUUzRGtCLEtBQU1nRCxFQUVWLENBRUEsR0FBMEIsaUJBQWYrRSxFQUF5QixDQUNsQyxHQUFJQSxLQUFjL0gsRUFDaEIsU0FFRixNQUFPLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLGNBQWNvSixlQUF5QmpKLEdBQ2xFa0IsS0FBTWdELEVBRVYsQ0FFQSxNQUFNSSxFQUFrQkwsRUFBcUJNLFNBQVMwRSxFQUFZL0UsR0FDbEUsSUFBS0ksRUFBZ0JuQixNQUNuQixNQUFPLENBQUVBLE9BQU8sRUFBT0MsTUFBT2tCLEVBQWdCbEIsTUFBT2xDLEtBQU1nRCxHQUU3REEsRUFBWUksRUFBZ0JwRCxJQUM5QixDQUVBLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsS0FBTWdELEVBQzNDLEVBRUFnRixNQUFBLENBQU1oRyxFQUFRaEMsRUFBTWxCLElBRWhCa0IsSUFBU2dDLEVBQU9nRyxPQUNmakksRUFBU0MsSUFBU0QsRUFBU2lDLEVBQU9nRyxRQUFVM0ksRUFBVVcsRUFBTWdDLEVBQU9nRyxRQUNuRXhJLE1BQU1DLFFBQVFPLElBQVNSLE1BQU1DLFFBQVF1QyxFQUFPZ0csUUFBVTNJLEVBQVVXLEVBQU1nQyxFQUFPZ0csT0FFdkUsQ0FBRS9GLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHOUIsQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsK0JBQWdDRyxHQUMzRGtCLFFBSUppSSxTQUFTakcsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDOUIsSUFBS3ZELE1BQU1DLFFBQVFPLEdBQ2pCLE1BQU8sQ0FBRWlDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsR0FBK0Isa0JBQXBCZ0MsRUFBT2lHLFNBQXdCLENBQ3hDLEdBQUlqRyxFQUFPaUcsU0FBVSxDQUNuQixNQUFNaEcsRUFBUWpDLEVBQUtOLE9BQVMsRUFDNUIsTUFBTyxDQUNMdUMsUUFDQUMsTUFBT0QsRUFBUSxLQUFPLElBQUl0RCxFQUFnQix1Q0FBd0NHLEdBQ2xGa0IsT0FFSixDQUVBLE1BQU8sQ0FDTGlDLE9BQU8sRUFDUEMsTUFBTyxJQUFJdkQsRUFBZ0IsbUNBQW9DRyxHQUMvRGtCLE9BRUosQ0FFQSxRQUFTTCxFQUFJLEVBQUdBLEVBQUlLLEVBQUtOLE9BQVFDLElBQUssQ0FFcEMsR0FEd0JvRCxFQUFxQk0sU0FBU3JCLEVBQU9pRyxTQUFVakksRUFBS0wsSUFDeERzQyxNQUNsQixNQUFPLENBQUVBLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsT0FFdkMsQ0FFQSxNQUFPLENBQ0xpQyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLHdFQUF5RUcsR0FDcEdrQixPQUVKLEVBRUFrSSxHQUFHbEcsRUFBUWhDLEVBQU1sQixFQUFTaUUsR0FDeEIsR0FBSSxTQUFVZixJQUFXLEdBQVMsU0FBVUEsSUFBVyxFQUNyRCxNQUFPLENBQUVDLE9BQU8sRUFBTUMsTUFBTyxLQUFNbEMsUUFHckMsR0FBeUIsa0JBQWRnQyxFQUFPa0csR0FBa0IsQ0FDbEMsR0FBSWxHLEVBQU9rRyxJQUNULEdBQUlsRyxFQUFPbUcsS0FBTSxDQUNmLE1BQU1DLEVBQWFyRixFQUFxQk0sU0FBU3JCLEVBQU9tRyxLQUFNbkksR0FDOUQsSUFBS29JLEVBQVduRyxNQUNkLE9BQU9tRyxDQUVYLE9BQ0YsR0FBV3BHLEVBQU9xRyxLQUFNLENBQ3RCLE1BQU1DLEVBQWF2RixFQUFxQk0sU0FBU3JCLEVBQU9xRyxLQUFNckksR0FDOUQsSUFBS3NJLEVBQVdyRyxNQUNkLE9BQU9xRyxDQUVYLENBQ0EsTUFBTyxDQUFFckcsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxPQUNyQyxDQUdBLEdBRGlCK0MsRUFBcUJNLFNBQVNyQixFQUFPa0csR0FBSWxJLEdBQzdDaUMsT0FDWCxHQUFJRCxFQUFPbUcsS0FBTSxDQUNmLE1BQU1DLEVBQWFyRixFQUFxQk0sU0FBU3JCLEVBQU9tRyxLQUFNbkksR0FDOUQsSUFBS29JLEVBQVduRyxNQUNkLE9BQU9tRyxDQUVYLE9BQ0YsR0FBV3BHLEVBQU9xRyxLQUFNLENBQ3RCLE1BQU1DLEVBQWF2RixFQUFxQk0sU0FBU3JCLEVBQU9xRyxLQUFNckksR0FDOUQsSUFBS3NJLEVBQVdyRyxNQUNkLE9BQU9xRyxDQUVYLENBRUEsTUFBTyxDQUFFckcsT0FBTyxFQUFNQyxNQUFPLEtBQU1sQyxPQUNyQyxFQUVBdUksSUFBSXZHLEVBQVFoQyxFQUFNbEIsRUFBU2lFLEdBQ3pCLEdBQTBCLGtCQUFmZixFQUFPdUcsSUFDaEIsT0FBSXZHLEVBQU91RyxJQUNGLENBQ0x0RyxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLDBCQUEyQkcsR0FDdERrQixRQUdHLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLFFBSXJDLE9BRHdCK0MsRUFBcUJNLFNBQVNyQixFQUFPdUcsSUFBS3ZJLEdBQzlDaUMsTUFDWCxDQUNMQSxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLDBCQUEyQkcsR0FDdERrQixRQUlHLENBQUVpQyxPQUFPLEVBQU1DLE1BQU8sS0FBTWxDLE9BQ3JDLEksZ0JDbFFLLE1BQ0x3SSxNQUFRLElBQUlDLElBQ1pwQyxRQUFVLElBQUlvQyxJQUNkOUYsU0FBVyxJQUFJOEYsSUFFZnZKLGNBQ0UsVUFBV3dKLEtBQVE3SSxPQUFPRCxLQUFLa0MsR0FDN0IxQyxLQUFLdUosUUFBUUQsRUFBTTVHLEVBQU00RyxJQUczQixVQUFXRSxLQUFXL0ksT0FBT0QsS0FBSytDLEdBQzVCQSxFQUFTaUcsSUFDWHhKLEtBQUt5SixXQUFXRCxFQUFTakcsRUFBU2lHLElBSXRDLFVBQVcxQyxLQUFVckcsT0FBT0QsS0FBS2EsR0FDM0JBLEVBQVF5RixJQUNWOUcsS0FBSzBKLFVBQVU1QyxFQUFRekYsRUFBUXlGLEdBR3JDLENBRUF5QyxRQUFROUosRUFBY2tLLEdBQ3BCM0osS0FBS29KLE1BQU1RLElBQUluSyxFQUFNa0ssRUFDdkIsQ0FFQUQsVUFBVWpLLEVBQWNrSyxHQUN0QjNKLEtBQUtpSCxRQUFRMkMsSUFBSW5LLEVBQU1rSyxFQUN6QixDQUVBRixXQUFXaEssRUFBY2tLLEdBQ3ZCM0osS0FBS3VELFNBQVNxRyxJQUFJbkssRUFBTWtLLEVBQzFCLENBRUFFLFFBQVFqSCxHQUNOLE1BQU1rSCxFQUFpQjlKLEtBQUsrSixjQUFjbkgsRUFBUSxLQUU1Q3FCLEVBQXVCckQsR0FBY1osS0FBS2lFLFNBQVM2RixFQUFnQmxKLEdBR3pFLE9BRkFxRCxFQUFTNkYsZUFBaUJBLEVBRW5CN0YsQ0FDVCxDQUVROEYsY0FBY25ILEVBQXVDbEQsR0FDdERpQixFQUFTaUMsS0FFVkEsR0FEYSxJQUFYQSxFQUNPLENBQ1AwRixNQUFPLENBQUMsQ0FBRWdCLEtBQU0sVUFBWSxDQUFFQSxLQUFNLFVBQVksQ0FBRUEsS0FBTSxXQUFhLENBQUVBLEtBQU0sU0FBVyxDQUFFQSxLQUFNLFVBQVksQ0FBRUEsS0FBTSxXQUVsRyxJQUFYMUcsRUFDQSxDQUNQNEYsTUFBTyxJQUdBLENBQ1BBLE1BQU8sQ0FBQzVGLEtBS2QsTUFBTWtILEVBQWlDLENBQUMsRUFFeEMsR0FBSSxTQUFVbEgsRUFBUSxDQUNwQixNQUFNd0csRUFBUWhKLE1BQU1DLFFBQVF1QyxFQUFPMEcsTUFBUTFHLEVBQU8wRyxLQUFPMUcsRUFBTzBHLEtBQUt4SCxNQUFNLEtBQUtrSSxJQUFLQyxHQUFNQSxFQUFFQyxRQUU3RkosRUFBZVYsTUFBUUEsRUFBTVksSUFBS1YsR0FBU3RKLEtBQUtvSixNQUFNbEMsSUFBSW9DLElBQU9hLE9BQVFSLEdBQWN0QixRQUFRc0IsR0FDakcsQ0FFQSxRQUFTakosS0FBT2tDLEVBQVEsQ0FDdEIsR0FBWSxTQUFSbEMsRUFDRixTQUdGLElBQUkwSixFQUFtQnBLLEtBQUt1RCxTQUFTMkQsSUFBSXhHLEdBQ3JDMEosSUFDRk4sRUFBZU8sV0FBYVAsRUFBZU8sWUFBYyxHQUN6RFAsRUFBZU8sV0FBV0MsS0FBS0YsSUFHN0JwSyxLQUFLdUssYUFBYTNILEVBQU9sQyxJQUMzQm9KLEVBQWVwSixHQUFPVixLQUFLK0osY0FBY25ILEVBQU9sQyxHQUFNLEdBQUdoQixLQUFXZ0IsS0FHbEVOLE1BQU1DLFFBQVF1QyxFQUFPbEMsSUFDdkJvSixFQUFlcEosR0FBT2tDLEVBQU9sQyxHQUFLc0osSUFBSSxDQUFDUSxFQUFXQyxJQUNoRHpLLEtBQUt1SyxhQUFhQyxHQUFheEssS0FBSytKLGNBQWNTLEVBQVcsR0FBRzlLLEtBQVdnQixLQUFPK0osS0FBV0QsR0FLN0Y3SixFQUFTaUMsRUFBT2xDLElBQ2xCb0osRUFBZXBKLEdBQU9WLEtBQUsrSixjQUFjbkgsRUFBT2xDLEdBQU0sR0FBR2hCLEtBQVdnQixLQUl0RW9KLEVBQWVwSixHQUFPa0MsRUFBT2xDLEVBQy9CLENBRUEsT0FBT29KLENBQ1QsQ0FFQTdGLFNBQVNyQixFQUF3QmhDLEdBQy9CLEdBQUlnQyxFQUFPd0csTUFBTyxDQUNoQixJQUFJc0IsR0FBWSxFQUNoQixRQUFTcEIsS0FBUTFHLEVBQU93RyxNQUFPLENBRzdCLEdBRmVFLEVBQUsxRyxFQUFRaEMsRUFBTWdDLEVBQU9sRCxRQUFTTSxNQUV2QzZDLE1BQU8sQ0FDaEI2SCxHQUFZLEVBQ1osS0FDRixDQUNGLENBRUEsSUFBS0EsRUFDSCxNQUFPLENBQ0w3SCxPQUFPLEVBQ1BDLE1BQU8sSUFBSXZELEVBQWdCLGVBQWdCcUQsRUFBT2xELFNBQ2xEa0IsT0FHTixDQUVBLEdBQUlnQyxFQUFPeUgsV0FDVCxRQUFTVixLQUFhL0csRUFBT3lILFdBQVksQ0FDdkMsTUFBTU0sRUFBU2hCLEVBQVUvRyxFQUFRaEMsRUFBTWdDLEVBQU9sRCxRQUFTTSxNQUV2RCxJQUFLMkssRUFBTzlILE1BQ1YsT0FBTzhILENBRVgsQ0FHRixNQUFPLENBQ0w5SCxPQUFPLEVBQ1BDLE1BQU8sS0FDUGxDLE9BRUosQ0FFUWdLLHlCQUF5QkosR0FDL0IsR0FBSSxTQUFVQSxFQUNaLE9BQU8sRUFHVCxRQUFTSyxLQUFVTCxFQUNqQixHQUFJeEssS0FBS3VELFNBQVNrRCxJQUFJb0UsR0FDcEIsT0FBTyxFQUdYLE9BQU8sQ0FDVCxDQUVBTixhQUFhQyxHQUNYLE9BQU83SixFQUFTNkosSUFBY3hLLEtBQUs0Syx5QkFBeUJKLEVBQzlELENBRUFuRyxpQkFBaUJtRyxHQUNmLE9BQU83SixFQUFTNkosS0FBZSxlQUFnQkEsR0FBYSxVQUFXQSxFQUN6RSxJIn0=