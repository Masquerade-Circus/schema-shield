//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlX2lzX215X2lwX3ZhbGlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlSXB2NEZpcnN0UGFzcyIsInJlU3VibmV0U3RyaW5nIiwicmVGb3J3YXJkU2xhc2giLCJyZVpvbmUiLCJyZUJhZENoYXJhY3RlcnMiLCJyZUJhZEFkZHJlc3MiLCJWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsIm5hbWUiLCJwb2ludGVyIiwibWVzc2FnZSIsInZhbHVlIiwiY29kZSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInN1cGVyIiwidGhpcyIsImRlZXBFcXVhbCIsIm9iaiIsIm90aGVyIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiaSIsImtleXMiLCJPYmplY3QiLCJrZXkiLCJpc09iamVjdCIsImRhdGEiLCJpbXBvcnRfaXNfbXlfaXBfdmFsaWQiLCJfX3RvRVNNIiwiUmVnRXhwcyIsInRpbWUiLCJ1cmkiLCJlbWFpbCIsImhvc3RuYW1lIiwiZGF0ZSIsIm5vdEltcGxlbWVudGVkRm9ybWF0IiwiRm9ybWF0cyIsInVwcGVyQ2FzZURhdGEiLCJ0b1VwcGVyQ2FzZSIsInRlc3QiLCJEYXRlIiwiaXNOYU4iLCJnZXRUaW1lIiwibG9jYWwiLCJkb21haW4iLCJzcGxpdCIsImluZGV4T2YiLCJpcHY0IiwiaXNNeUlwVmFsaWQiLCJ2ZXJzaW9uIiwiaXB2NiIsInJlZ2V4IiwiUmVnRXhwIiwiZSIsImR1cmF0aW9uIiwidXVpZCIsImlyaSIsIlR5cGVzIiwib2JqZWN0Iiwic2NoZW1hIiwidmFsaWQiLCJlcnJvcnMiLCJhcnJheSIsInN0cmluZyIsIm51bWJlciIsImludGVnZXIiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJib29sZWFuIiwibnVsbCIsImtleXdvcmRzIiwicmVxdWlyZWQiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJwcm9wZXJ0aWVzIiwic2NoZW1hU2hpZWxkSW5zdGFuY2UiLCJmaW5hbERhdGEiLCJkZWZhdWx0IiwidmFsaWRhdG9yUmVzdWx0IiwidmFsaWRhdGUiLCJtYXhQcm9wZXJ0aWVzIiwibWluUHJvcGVydGllcyIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwiaXNDb21waWxlZFNjaGVtYSIsInBhdHRlcm5Qcm9wZXJ0aWVzIiwibWF0Y2giLCJwYXR0ZXJuIiwicGF0dGVybnMiLCJwcm9wZXJ0eU5hbWVzIiwiaXRlbXMiLCJzY2hlbWFJdGVtcyIsInNjaGVtYUl0ZW1zTGVuZ3RoIiwiZGF0YUxlbmd0aCIsIml0ZW1zTGVuZ3RoIiwiTWF0aCIsIm1pbiIsInZhbGlkYXRvckVycm9ycyIsIm1pbkl0ZW1zIiwibWF4SXRlbXMiLCJhZGRpdGlvbmFsSXRlbXMiLCJ1bmlxdWVJdGVtcyIsInVuaXF1ZSIsIk1hcCIsIml0ZW0iLCJpdGVtU3RyIiwic29ydGVkIiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoYXMiLCJzZXQiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJwYXR0ZXJuUmVnZXhwIiwiZm9ybWF0IiwiZm9ybWF0SW5zdGFuY2UiLCJmb3JtYXRWYWxpZGF0ZSIsImZvcm1hdHMiLCJnZXQiLCJlbnVtIiwiZW51bUl0ZW0iLCJqb2luIiwibWluaW11bSIsImV4Y2x1c2l2ZU1pbmltdW0iLCJtYXhpbXVtIiwibWF4IiwiZXhjbHVzaXZlTWF4aW11bSIsIm11bHRpcGxlT2YiLCJxdW90aWVudCIsImlzRmluaXRlIiwiYXJlTXVsdGlwbGVzIiwiZXBzaWxvbiIsImFicyIsImFyZUNsb3NlRW5vdWdoIiwicm91bmQiLCJudWxsYWJsZSIsImFsbE9mIiwiQm9vbGVhbiIsImFueU9mIiwidmFsaWRhdGlvblJlc3VsdCIsIm9uZU9mIiwidmFsaWRDb3VudCIsImRlcGVuZGVuY2llcyIsImRlcGVuZGVuY3kiLCJjb25zdCIsImNvbnRhaW5zIiwiaWYiLCJ0aGVuIiwidGhlblJlc3VsdCIsImVsc2UiLCJlbHNlUmVzdWx0Iiwibm90IiwidHlwZXMiLCJmb3JFYWNoIiwidHlwZSIsImFkZFR5cGUiLCJrZXl3b3JkIiwiYWRkS2V5d29yZCIsImFkZEZvcm1hdCIsInZhbGlkYXRvciIsImNvbXBpbGUiLCJjb21waWxlZFNjaGVtYSIsImNvbXBpbGVTY2hlbWEiLCJtYXAiLCJ0IiwidHJpbSIsImZpbHRlciIsInZhbGlkYXRvcnMiLCJpc1NjaGVtYUxpa2UiLCJzdWJTY2hlbWEiLCJpbmRleCIsInJlc3VsdCIsImlzU2NoZW1hT3JLZXl3b3JkUHJlc2VudCIsInN1YktleSJdLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9pcy1teS1pcC12YWxpZC9pbmRleC5qcyIsIi4uL2xpYi91dGlscy50cyIsIi4uL2xpYi9mb3JtYXRzLnRzIiwiLi4vbGliL3R5cGVzLnRzIiwiLi4vbGliL2tleXdvcmRzLnRzIiwiLi4vbGliL2tleXdvcmRzL29iamVjdC1rZXl3b3Jkcy50cyIsIi4uL2xpYi9rZXl3b3Jkcy9hcnJheS1rZXl3b3Jkcy50cyIsIi4uL2xpYi9rZXl3b3Jkcy9zdHJpbmcta2V5d29yZHMudHMiLCIuLi9saWIva2V5d29yZHMvbnVtYmVyLWtleXdvcmRzLnRzIiwiLi4vbGliL2tleXdvcmRzL290aGVyLWtleXdvcmRzLnRzIiwiLi4vbGliL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZUlwdjRGaXJzdFBhc3MgPSAvXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC9cblxudmFyIHJlU3VibmV0U3RyaW5nID0gL1xcL1xcZHsxLDN9KD89JXwkKS9cbnZhciByZUZvcndhcmRTbGFzaCA9IC9cXC8vXG52YXIgcmVab25lID0gLyUuKiQvXG52YXIgcmVCYWRDaGFyYWN0ZXJzID0gLyhbXjAtOWEtZjovJV0pL2lcbnZhciByZUJhZEFkZHJlc3MgPSAvKFswLTlhLWZdezUsfXw6ezMsfXxbXjpdOiR8XjpbXjpdfFxcLyQpL2lcblxuZnVuY3Rpb24gdmFsaWRhdGU0IChpbnB1dCkge1xuICBpZiAoIShyZUlwdjRGaXJzdFBhc3MudGVzdChpbnB1dCkpKSByZXR1cm4gZmFsc2VcblxuICB2YXIgcGFydHMgPSBpbnB1dC5zcGxpdCgnLicpXG5cbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gNCkgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKHBhcnRzWzBdWzBdID09PSAnMCcgJiYgcGFydHNbMF0ubGVuZ3RoID4gMSkgcmV0dXJuIGZhbHNlXG4gIGlmIChwYXJ0c1sxXVswXSA9PT0gJzAnICYmIHBhcnRzWzFdLmxlbmd0aCA+IDEpIHJldHVybiBmYWxzZVxuICBpZiAocGFydHNbMl1bMF0gPT09ICcwJyAmJiBwYXJ0c1syXS5sZW5ndGggPiAxKSByZXR1cm4gZmFsc2VcbiAgaWYgKHBhcnRzWzNdWzBdID09PSAnMCcgJiYgcGFydHNbM10ubGVuZ3RoID4gMSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIG4wID0gTnVtYmVyKHBhcnRzWzBdKVxuICB2YXIgbjEgPSBOdW1iZXIocGFydHNbMV0pXG4gIHZhciBuMiA9IE51bWJlcihwYXJ0c1syXSlcbiAgdmFyIG4zID0gTnVtYmVyKHBhcnRzWzNdKVxuXG4gIHJldHVybiAobjAgPj0gMCAmJiBuMCA8IDI1NiAmJiBuMSA+PSAwICYmIG4xIDwgMjU2ICYmIG4yID49IDAgJiYgbjIgPCAyNTYgJiYgbjMgPj0gMCAmJiBuMyA8IDI1Nilcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGU2IChpbnB1dCkge1xuICB2YXIgd2l0aG91dFN1Ym5ldCA9IGlucHV0LnJlcGxhY2UocmVTdWJuZXRTdHJpbmcsICcnKVxuICB2YXIgaGFzU3VibmV0ID0gKGlucHV0Lmxlbmd0aCAhPT0gd2l0aG91dFN1Ym5ldC5sZW5ndGgpXG5cbiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIHByb2JhYmx5IGJlIGFuIG9wdGlvbiBpbiB0aGUgZnV0dXJlXG4gIGlmIChoYXNTdWJuZXQpIHJldHVybiBmYWxzZVxuXG4gIGlmICghaGFzU3VibmV0KSB7XG4gICAgaWYgKHJlRm9yd2FyZFNsYXNoLnRlc3QoaW5wdXQpKSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHZhciB3aXRob3V0Wm9uZSA9IHdpdGhvdXRTdWJuZXQucmVwbGFjZShyZVpvbmUsICcnKVxuICB2YXIgbGFzdFBhcnRTZXBhcmF0b3IgPSB3aXRob3V0Wm9uZS5sYXN0SW5kZXhPZignOicpXG5cbiAgaWYgKGxhc3RQYXJ0U2VwYXJhdG9yID09PSAtMSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIGxhc3RQYXJ0ID0gd2l0aG91dFpvbmUuc3Vic3RyaW5nKGxhc3RQYXJ0U2VwYXJhdG9yICsgMSlcbiAgdmFyIGhhc1Y0UGFydCA9IHZhbGlkYXRlNChsYXN0UGFydClcbiAgdmFyIGFkZHJlc3MgPSAoaGFzVjRQYXJ0ID8gd2l0aG91dFpvbmUuc3Vic3RyaW5nKDAsIGxhc3RQYXJ0U2VwYXJhdG9yICsgMSkgKyAnMTIzNDo1Njc4JyA6IHdpdGhvdXRab25lKVxuXG4gIGlmIChyZUJhZENoYXJhY3RlcnMudGVzdChhZGRyZXNzKSkgcmV0dXJuIGZhbHNlXG4gIGlmIChyZUJhZEFkZHJlc3MudGVzdChhZGRyZXNzKSkgcmV0dXJuIGZhbHNlXG5cbiAgdmFyIGhhbHZlcyA9IGFkZHJlc3Muc3BsaXQoJzo6JylcblxuICBpZiAoaGFsdmVzLmxlbmd0aCA+IDIpIHJldHVybiBmYWxzZVxuXG4gIGlmIChoYWx2ZXMubGVuZ3RoID09PSAyKSB7XG4gICAgdmFyIGZpcnN0ID0gKGhhbHZlc1swXSA9PT0gJycgPyBbXSA6IGhhbHZlc1swXS5zcGxpdCgnOicpKVxuICAgIHZhciBsYXN0ID0gKGhhbHZlc1sxXSA9PT0gJycgPyBbXSA6IGhhbHZlc1sxXS5zcGxpdCgnOicpKVxuICAgIHZhciByZW1haW5pbmdMZW5ndGggPSA4IC0gKGZpcnN0Lmxlbmd0aCArIGxhc3QubGVuZ3RoKVxuXG4gICAgaWYgKHJlbWFpbmluZ0xlbmd0aCA8PSAwKSByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICBpZiAoYWRkcmVzcy5zcGxpdCgnOicpLmxlbmd0aCAhPT0gOCkgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZSAoaW5wdXQpIHtcbiAgcmV0dXJuIHZhbGlkYXRlNChpbnB1dCkgfHwgdmFsaWRhdGU2KGlucHV0KVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHZhbGlkYXRvciAob3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fVxuXG4gIGlmIChvcHRpb25zLnZlcnNpb24gPT09IDQpIHJldHVybiB2YWxpZGF0ZTRcbiAgaWYgKG9wdGlvbnMudmVyc2lvbiA9PT0gNikgcmV0dXJuIHZhbGlkYXRlNlxuICBpZiAob3B0aW9ucy52ZXJzaW9uID09IG51bGwpIHJldHVybiB2YWxpZGF0ZVxuXG4gIHRocm93IG5ldyBFcnJvcignVW5rbm93biB2ZXJzaW9uOiAnICsgb3B0aW9ucy52ZXJzaW9uKVxufVxuXG5tb2R1bGUuZXhwb3J0c1snX19hbGxfcmVnZXhlc19fJ10gPSBbXG4gIHJlSXB2NEZpcnN0UGFzcyxcbiAgcmVTdWJuZXRTdHJpbmcsXG4gIHJlRm9yd2FyZFNsYXNoLFxuICByZVpvbmUsXG4gIHJlQmFkQ2hhcmFjdGVycyxcbiAgcmVCYWRBZGRyZXNzXG5dXG4iLCJpbXBvcnQgeyBTY2hlbWFTaGllbGQsIFZhbGlkYXRpb25FcnJvclByb3BzIH0gZnJvbSAnLi9pbmRleCc7XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBwb2ludGVyOiBzdHJpbmc7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIHZhbHVlOiBhbnk7XHJcbiAgY29kZTogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIG1lc3NhZ2U6IHN0cmluZyxcclxuICAgIG9wdGlvbnM6IFZhbGlkYXRpb25FcnJvclByb3BzID0ge1xyXG4gICAgICBwb2ludGVyOiAnJyxcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIGNvZGU6ICcnLFxyXG4gICAgfVxyXG4gICkge1xyXG4gICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB0aGlzLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJztcclxuICAgIHRoaXMucG9pbnRlciA9IG9wdGlvbnMucG9pbnRlcjtcclxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICB0aGlzLnZhbHVlID0gb3B0aW9ucy52YWx1ZTtcclxuICAgIHRoaXMuY29kZSA9IG9wdGlvbnMuY29kZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0VmFsaWRhdG9yID0gKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikgPT4ge1xyXG4gIHJldHVybiBbXHJcbiAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdObyB2YWxpZGF0b3IgZm9yIHRoaXMgc2NoZW1hJywge1xyXG4gICAgICBwb2ludGVyLFxyXG4gICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgY29kZTogJ05PX1ZBTElEQVRPUicsXHJcbiAgICB9KSxcclxuICBdO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBFcXVhbChvYmo6IEFycmF5PGFueT4gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvdGhlcjogQXJyYXk8YW55PiB8IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcclxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopICYmIEFycmF5LmlzQXJyYXkob3RoZXIpKSB7XHJcbiAgICBpZiAob2JqLmxlbmd0aCAhPT0gb3RoZXIubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoIWRlZXBFcXVhbChvYmpbaV0sIG90aGVyW2ldKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiBvdGhlciA9PT0gJ29iamVjdCcpIHtcclxuICAgIGlmIChvYmogPT09IG51bGwgfHwgb3RoZXIgPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuIG9iaiA9PT0gb3RoZXI7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XHJcbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKG90aGVyKS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgaWYgKCFkZWVwRXF1YWwob2JqW2tleV0sIG90aGVyW2tleV0pKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb2JqID09PSBvdGhlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGRhdGEpIHtcclxuICByZXR1cm4gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcmVDbG9zZUVub3VnaChhLCBiLCBlcHNpbG9uID0gMWUtMTUpIHtcclxuICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDw9IGVwc2lsb24gKiBNYXRoLm1heChNYXRoLmFicyhhKSwgTWF0aC5hYnMoYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VVRGMTZMZW5ndGgoc3RyKSB7XHJcbiAgbGV0IGxlbmd0aCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IGNvZGVQb2ludCA9IHN0ci5jb2RlUG9pbnRBdChpKTtcclxuICAgIGlmIChjb2RlUG9pbnQgPiAweGZmZmYpIHtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgbGVuZ3RoKys7XHJcbiAgfVxyXG4gIHJldHVybiBsZW5ndGg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWVwQ2xvbmUob2JqOiBhbnkpOiBhbnkge1xyXG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcmVzdWx0W2ldID0gZGVlcENsb25lKG9ialtpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgaWYgKGlzT2JqZWN0KG9iaikpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgIHJlc3VsdFtrZXldID0gZGVlcENsb25lKG9ialtrZXldKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb2JqO1xyXG59XHJcbiIsImltcG9ydCBpc015SXBWYWxpZCBmcm9tICdpcy1teS1pcC12YWxpZCc7XHJcbmltcG9ydCB7IEZvcm1hdEZ1bmN0aW9uIH0gZnJvbSAnLi9pbmRleCc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuLy8gVGhlIGRhdGV0aW1lIDE5OTAtMDItMzFUMTU6NTk6NjAuMTIzLTA4OjAwIG11c3QgYmUgcmVqZWN0ZWQuXHJcbmNvbnN0IFJlZ0V4cHMgPSB7XHJcbiAgJ2RhdGUtdGltZSc6IC9eKFxcZHs0fSktKFxcZHsyfSktKFxcZHsyfSlUKFxcZHsyfSk6KFxcZHsyfSk6KFxcZHsyfSkoXFwuXFxkKyk/KFp8KFsrLV0pKFxcZHsyfSk6KFxcZHsyfSkpJC8sXHJcbiAgdGltZTogL14oXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KShcXC5cXGQrKT8oWnwoWystXSkoXFxkezJ9KTooXFxkezJ9KSkkLyxcclxuICB1cmk6IC9eW2EtekEtWl1bYS16QS1aMC05K1xcLS5dKjpbXlxcc10qJC8sXHJcbiAgZW1haWw6XHJcbiAgICAvXlthLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC8sXHJcbiAgaG9zdG5hbWU6IC9eW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2Mn0oXFwuW2EtekEtWjAtOV1bYS16QS1aMC05LV17MCw2Mn0pKlthLXpBLVowLTldJC8sXHJcbiAgZGF0ZTogL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvLFxyXG4gICdqc29uLXBvaW50ZXInOiAvXlxcLyg/Oltefl18fjB8fjEpKiQvLFxyXG4gICdyZWxhdGl2ZS1qc29uLXBvaW50ZXInOiAvXihbMC05XSspKCN8XFwvKD86W15+XXx+MHx+MSkqKT8kLyxcclxufTtcclxuXHJcbmZ1bmN0aW9uIG5vdEltcGxlbWVudGVkRm9ybWF0KGRhdGE6IGFueSkge1xyXG4gIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEZvcm1hdCBcIiR7ZGF0YX1cIiBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LiBQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBvbiBHaXRIdWIuYCk7XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRm9ybWF0czogUmVjb3JkPHN0cmluZywgRm9ybWF0RnVuY3Rpb24+ID0ge1xyXG4gIFsnZGF0ZS10aW1lJ10oZGF0YSkge1xyXG4gICAgY29uc3QgdXBwZXJDYXNlRGF0YSA9IGRhdGEudG9VcHBlckNhc2UoKTtcclxuICAgIGlmICghUmVnRXhwc1snZGF0ZS10aW1lJ10udGVzdCh1cHBlckNhc2VEYXRhKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHVwcGVyQ2FzZURhdGEpO1xyXG4gICAgcmV0dXJuICFpc05hTihkYXRlLmdldFRpbWUoKSk7XHJcbiAgfSxcclxuICB1cmkoZGF0YSkge1xyXG4gICAgcmV0dXJuIFJlZ0V4cHMudXJpLnRlc3QoZGF0YSk7XHJcbiAgfSxcclxuICBlbWFpbChkYXRhKSB7XHJcbiAgICBpZiAoIVJlZ0V4cHMuZW1haWwudGVzdChkYXRhKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgW2xvY2FsLCBkb21haW5dID0gZGF0YS5zcGxpdCgnQCcpO1xyXG5cclxuICAgIGlmIChsb2NhbC5sZW5ndGggPiA2NCB8fCBsb2NhbC5pbmRleE9mKCcuLicpICE9PSAtMSB8fCBsb2NhbFswXSA9PT0gJy4nIHx8IGxvY2FsW2xvY2FsLmxlbmd0aCAtIDFdID09PSAnLicpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb21haW4ubGVuZ3RoID4gMjU1IHx8IGRvbWFpbi5pbmRleE9mKCcuLicpICE9PSAtMSB8fCBkb21haW5bMF0gPT09ICcuJyB8fCBkb21haW5bZG9tYWluLmxlbmd0aCAtIDFdID09PSAnLicpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0sXHJcbiAgaXB2NDogaXNNeUlwVmFsaWQoeyB2ZXJzaW9uOiA0IH0pLFxyXG4gIGlwdjY6IGlzTXlJcFZhbGlkKHsgdmVyc2lvbjogNiB9KSxcclxuXHJcbiAgaG9zdG5hbWUoZGF0YSkge1xyXG4gICAgcmV0dXJuIFJlZ0V4cHMuaG9zdG5hbWUudGVzdChkYXRhKTtcclxuICB9LFxyXG4gIGRhdGUoZGF0YSkge1xyXG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFJlZ0V4cHMuZGF0ZS50ZXN0KGRhdGEpID09PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICFpc05hTihuZXcgRGF0ZShkYXRhKS5nZXRUaW1lKCkpO1xyXG4gIH0sXHJcbiAgcmVnZXgoZGF0YSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbmV3IFJlZ0V4cChkYXRhKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG4gICdqc29uLXBvaW50ZXInKGRhdGEpIHtcclxuICAgIGlmIChkYXRhID09PSAnJykge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUmVnRXhwc1snanNvbi1wb2ludGVyJ10udGVzdChkYXRhKTtcclxuICB9LFxyXG4gICdyZWxhdGl2ZS1qc29uLXBvaW50ZXInKGRhdGEpIHtcclxuICAgIGlmIChkYXRhID09PSAnJykge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUmVnRXhwc1sncmVsYXRpdmUtanNvbi1wb2ludGVyJ10udGVzdChkYXRhKTtcclxuICB9LFxyXG4gIHRpbWUoZGF0YSkge1xyXG4gICAgcmV0dXJuIFJlZ0V4cHMudGltZS50ZXN0KGRhdGEpO1xyXG4gIH0sXHJcblxyXG4gIC8vIE5vdCBzdXBwb3J0ZWQgeWV0XHJcblxyXG4gIGR1cmF0aW9uOiBub3RJbXBsZW1lbnRlZEZvcm1hdCxcclxuICAnaWRuLWVtYWlsJzogbm90SW1wbGVtZW50ZWRGb3JtYXQsXHJcbiAgJ2lkbi1ob3N0bmFtZSc6IG5vdEltcGxlbWVudGVkRm9ybWF0LFxyXG4gIHV1aWQ6IG5vdEltcGxlbWVudGVkRm9ybWF0LFxyXG4gICd1cmktcmVmZXJlbmNlJzogbm90SW1wbGVtZW50ZWRGb3JtYXQsXHJcbiAgaXJpOiBub3RJbXBsZW1lbnRlZEZvcm1hdCxcclxuICAnaXJpLXJlZmVyZW5jZSc6IG5vdEltcGxlbWVudGVkRm9ybWF0LFxyXG4gICd1cmktdGVtcGxhdGUnOiBub3RJbXBsZW1lbnRlZEZvcm1hdCxcclxufTtcclxuIiwiaW1wb3J0IHsgaXNPYmplY3QsIFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0b3JGdW5jdGlvbiB9IGZyb20gJy4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFR5cGVzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XHJcbiAgb2JqZWN0KHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKGlzT2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWQ6IHRydWUsXHJcbiAgICAgICAgZXJyb3JzOiBbXSxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgYW4gb2JqZWN0Jywge1xyXG4gICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgY29kZTogJ05PVF9BTl9PQkpFQ1QnLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGFycmF5KHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmICdsZW5ndGgnIGluIGRhdGEpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGtleSBpcyBhIG51bWJlciBhbmQgdGhlIGxlbmd0aCBpcyB0aGUgc2FtZSBhcyB0aGUgbnVtYmVyIG9mIGtleXMgLSAxIChsZW5ndGgpXHJcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcclxuICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCAmJiAoa2V5c1swXSAhPT0gJzAnIHx8IGtleXMubGVuZ3RoICE9PSBkYXRhLmxlbmd0aCkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0RhdGEgaXMgbm90IGFuIGFycmF5Jywge1xyXG4gICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICAgICAgY29kZTogJ05PVF9BTl9BUlJBWScsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcnM6IFtcclxuICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhbiBhcnJheScsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdOT1RfQU5fQVJSQVknLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIHN0cmluZyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcnM6IFtcclxuICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhIHN0cmluZycsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdOT1RfQV9TVFJJTkcnLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIG51bWJlcihzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcnM6IFtcclxuICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhIG51bWJlcicsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdOT1RfQV9OVU1CRVInLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG4gIGludGVnZXIoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInICYmIE51bWJlci5pc0ludGVnZXIoZGF0YSkpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcnM6IFtcclxuICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhbiBpbnRlZ2VyJywge1xyXG4gICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgY29kZTogJ05PVF9BTl9JTlRFR0VSJyxcclxuICAgICAgICB9KSxcclxuICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxuICBib29sZWFuKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyBhIGJvb2xlYW4gbGlrZSB2YWx1ZVxyXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcnM6IFtcclxuICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdEYXRhIGlzIG5vdCBhIGJvb2xlYW4nLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnTk9UX0FfQk9PTEVBTicsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgbnVsbChzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmIChkYXRhID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWQ6IHRydWUsXHJcbiAgICAgICAgZXJyb3JzOiBbXSxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignRGF0YSBpcyBub3QgbnVsbCcsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdOT1RfTlVMTCcsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcbn07XHJcbiIsImltcG9ydCB7IEFycmF5S2V5d29yZHMgfSBmcm9tIFwiLi9rZXl3b3Jkcy9hcnJheS1rZXl3b3Jkc1wiO1xyXG5pbXBvcnQgeyBOdW1iZXJLZXl3b3JkcyB9IGZyb20gXCIuL2tleXdvcmRzL251bWJlci1rZXl3b3Jkc1wiO1xyXG5pbXBvcnQgeyBPYmplY3RLZXl3b3JkcyB9IGZyb20gXCIuL2tleXdvcmRzL29iamVjdC1rZXl3b3Jkc1wiO1xyXG5pbXBvcnQgeyBPdGhlcktleXdvcmRzIH0gZnJvbSBcIi4va2V5d29yZHMvb3RoZXIta2V5d29yZHNcIjtcclxuaW1wb3J0IHsgU3RyaW5nS2V5d29yZHMgfSBmcm9tIFwiLi9rZXl3b3Jkcy9zdHJpbmcta2V5d29yZHNcIjtcclxuaW1wb3J0IHsgVmFsaWRhdG9yRnVuY3Rpb24gfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGtleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XHJcbiAgLi4uT2JqZWN0S2V5d29yZHMsXHJcbiAgLi4uQXJyYXlLZXl3b3JkcyxcclxuICAuLi5TdHJpbmdLZXl3b3JkcyxcclxuICAuLi5OdW1iZXJLZXl3b3JkcyxcclxuICAuLi5PdGhlcktleXdvcmRzXHJcbn07XHJcbiIsImltcG9ydCB7IENvbXBpbGVkU2NoZW1hLCBWYWxpZGF0b3JGdW5jdGlvbiB9IGZyb20gJy4uL2luZGV4JztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBpc09iamVjdCB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBPYmplY3RLZXl3b3JkczogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24+ID0ge1xyXG4gIC8vIE9iamVjdFxyXG4gIHJlcXVpcmVkKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkOiB0cnVlLFxyXG4gICAgICAgIGVycm9yczogW10sXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NoZW1hLnJlcXVpcmVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGtleSA9IHNjaGVtYS5yZXF1aXJlZFtpXTtcclxuICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHknLCB7XHJcbiAgICAgICAgICAgIHBvaW50ZXI6IGAke3BvaW50ZXJ9LyR7a2V5fWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICBjb2RlOiAnTUlTU0lOR19SRVFVSVJFRF9QUk9QRVJUWScsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhIH07XHJcbiAgfSxcclxuXHJcbiAgcHJvcGVydGllcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyb3JzID0gW107XHJcbiAgICBsZXQgZmluYWxEYXRhID0geyAuLi5kYXRhIH07XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hLnByb3BlcnRpZXMpIHtcclxuICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkgfHwgdHlwZW9mIGRhdGFba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBpZiAoaXNPYmplY3Qoc2NoZW1hLnByb3BlcnRpZXNba2V5XSkgJiYgJ2RlZmF1bHQnIGluIHNjaGVtYS5wcm9wZXJ0aWVzW2tleV0pIHtcclxuICAgICAgICAgIGZpbmFsRGF0YVtrZXldID0gc2NoZW1hLnByb3BlcnRpZXNba2V5XS5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlb2Ygc2NoZW1hLnByb3BlcnRpZXNba2V5XSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgaWYgKHNjaGVtYS5wcm9wZXJ0aWVzW2tleV0gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignUHJvcGVydHkgaXMgbm90IGFsbG93ZWQnLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcjogYCR7cG9pbnRlcn0vJHtrZXl9YCxcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YVtrZXldLFxyXG4gICAgICAgICAgICAgIGNvZGU6ICdQUk9QRVJUWV9OT1RfQUxMT1dFRCcsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLnByb3BlcnRpZXNba2V5XSwgZmluYWxEYXRhW2tleV0pO1xyXG5cclxuICAgICAgZmluYWxEYXRhW2tleV0gPSB2YWxpZGF0b3JSZXN1bHQuZGF0YTtcclxuXHJcbiAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goLi4udmFsaWRhdG9yUmVzdWx0LmVycm9ycyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICB9LFxyXG5cclxuICBtYXhQcm9wZXJ0aWVzKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKCFpc09iamVjdChkYXRhKSB8fCBPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPD0gc2NoZW1hLm1heFByb3BlcnRpZXMpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgIGVycm9yczogW1xyXG4gICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ09iamVjdCBoYXMgdG9vIG1hbnkgcHJvcGVydGllcycsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdPQkpFQ1RfVE9PX01BTllfUFJPUEVSVElFUycsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIG1pblByb3BlcnRpZXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XHJcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpIHx8IE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA+PSBzY2hlbWEubWluUHJvcGVydGllcykge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignT2JqZWN0IGhhcyB0b28gZmV3IHByb3BlcnRpZXMnLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnT0JKRUNUX1RPT19GRVdfUFJPUEVSVElFUycsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGFkZGl0aW9uYWxQcm9wZXJ0aWVzKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcclxuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcclxuICAgIGxldCBmaW5hbERhdGEgPSB7IC4uLmRhdGEgfTtcclxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcclxuICAgIGNvbnN0IGlzQ29tcGlsZWRTY2hlbWEgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS5pc0NvbXBpbGVkU2NoZW1hKHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyk7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XHJcbiAgICAgIGlmIChzY2hlbWEucHJvcGVydGllcyAmJiBzY2hlbWEucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzY2hlbWEucGF0dGVyblByb3BlcnRpZXMpIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gaW4gc2NoZW1hLnBhdHRlcm5Qcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICBpZiAobmV3IFJlZ0V4cChwYXR0ZXJuLCAndScpLnRlc3Qoa2V5KSkge1xyXG4gICAgICAgICAgICBtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcclxuICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0FkZGl0aW9uYWwgcHJvcGVydHkgbm90IGFsbG93ZWQnLCB7XHJcbiAgICAgICAgICAgIHBvaW50ZXI6IGAke3BvaW50ZXJ9LyR7a2V5fWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICBjb2RlOiAnQURESVRJT05BTF9QUk9QRVJUWV9OT1RfQUxMT1dFRCcsXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpc0NvbXBpbGVkU2NoZW1hKSB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzLCBmaW5hbERhdGFba2V5XSk7XHJcblxyXG4gICAgICAgIGZpbmFsRGF0YVtrZXldID0gdmFsaWRhdG9yUmVzdWx0LmRhdGE7XHJcblxyXG4gICAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaCguLi52YWxpZGF0b3JSZXN1bHQuZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICB9LFxyXG5cclxuICBwYXR0ZXJuUHJvcGVydGllcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyb3JzID0gW107XHJcbiAgICBsZXQgZmluYWxEYXRhID0geyAuLi5kYXRhIH07XHJcbiAgICBjb25zdCBwYXR0ZXJucyA9IE9iamVjdC5rZXlzKHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllcyk7XHJcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcclxuICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHBhdHRlcm4sICd1Jyk7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuXSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgaWYgKHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuXSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGZpbmFsRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAocmVnZXgudGVzdChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdQcm9wZXJ0eSBpcyBub3QgYWxsb3dlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgcG9pbnRlcjogYCR7cG9pbnRlcn0vJHtrZXl9YCxcclxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFba2V5XSxcclxuICAgICAgICAgICAgICAgICAgY29kZTogJ1BST1BFUlRZX05PVF9BTExPV0VEJyxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZpbmFsRGF0YSk7XHJcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcclxuICAgICAgICBpZiAocmVnZXgudGVzdChrZXkpKSB7XHJcbiAgICAgICAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEucGF0dGVyblByb3BlcnRpZXNbcGF0dGVybl0sIGZpbmFsRGF0YVtrZXldKTtcclxuXHJcbiAgICAgICAgICBmaW5hbERhdGFba2V5XSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xyXG5cclxuICAgICAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnZhbGlkYXRvclJlc3VsdC5lcnJvcnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMsIGRhdGE6IGZpbmFsRGF0YSB9O1xyXG4gIH0sXHJcblxyXG4gIHByb3BlcnR5TmFtZXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xyXG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLnByb3BlcnR5TmFtZXMgPT09ICdib29sZWFuJykge1xyXG4gICAgICBpZiAoc2NoZW1hLnByb3BlcnR5TmFtZXMgPT09IGZhbHNlICYmIE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1Byb3BlcnR5IG5hbWVzIGFyZSBub3QgYWxsb3dlZCcsIHtcclxuICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICAgIGNvZGU6ICdQUk9QRVJUWV9OQU1FU19OT1RfQUxMT1dFRCcsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgbGV0IGZpbmFsRGF0YSA9IHsgLi4uZGF0YSB9O1xyXG5cclxuICAgIGlmIChzY2hlbWFTaGllbGRJbnN0YW5jZS5pc0NvbXBpbGVkU2NoZW1hKHNjaGVtYS5wcm9wZXJ0eU5hbWVzKSkge1xyXG4gICAgICBmb3IgKGxldCBrZXkgaW4gZmluYWxEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLnByb3BlcnR5TmFtZXMsIGtleSk7XHJcblxyXG4gICAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaCguLi52YWxpZGF0b3JSZXN1bHQuZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICB9LFxyXG59O1xyXG4iLCJpbXBvcnQgeyBDb21waWxlZFNjaGVtYSwgVmFsaWRhdG9yRnVuY3Rpb24gfSBmcm9tICcuLi9pbmRleCc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5leHBvcnQgY29uc3QgQXJyYXlLZXl3b3JkczogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24+ID0ge1xyXG4gIGl0ZW1zKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgY29uc3QgZmluYWxEYXRhID0gWy4uLmRhdGFdO1xyXG4gICAgY29uc3Qgc2NoZW1hSXRlbXMgPSBzY2hlbWEuaXRlbXM7XHJcbiAgICBjb25zdCBzY2hlbWFJdGVtc0xlbmd0aCA9IEFycmF5LmlzQXJyYXkoc2NoZW1hSXRlbXMpID8gc2NoZW1hSXRlbXMubGVuZ3RoIDogMDtcclxuICAgIGNvbnN0IGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWFJdGVtcykpIHtcclxuICAgICAgY29uc3QgaXRlbXNMZW5ndGggPSBNYXRoLm1pbihzY2hlbWFJdGVtc0xlbmd0aCwgZGF0YUxlbmd0aCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc2NoZW1hSXRlbXNbaV0gPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgaWYgKHNjaGVtYUl0ZW1zW2ldID09PSBmYWxzZSAmJiB0eXBlb2YgZGF0YVtpXSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXRlbSBpcyBub3QgYWxsb3dlZCcsIHtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXI6IGAke3BvaW50ZXJ9LyR7aX1gLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbaV0sXHJcbiAgICAgICAgICAgICAgICBjb2RlOiAnQVJSQVlfSVRFTV9OT1RfQUxMT1dFRCcsXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hSXRlbXNbaV0sIGZpbmFsRGF0YVtpXSk7XHJcblxyXG4gICAgICAgIGZpbmFsRGF0YVtpXSA9IHZhbGlkYXRvclJlc3VsdC5kYXRhO1xyXG5cclxuICAgICAgICBpZiAoIXZhbGlkYXRvclJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goLi4udmFsaWRhdG9yUmVzdWx0LmVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzY2hlbWFJdGVtcyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIGlmIChzY2hlbWFJdGVtcyA9PT0gZmFsc2UgJiYgZGF0YUxlbmd0aCA+IDApIHtcclxuICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0FycmF5IGlzIG5vdCBhbGxvd2VkJywge1xyXG4gICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgY29kZTogJ0FSUkFZX05PVF9BTExPV0VEJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChzY2hlbWFTaGllbGRJbnN0YW5jZS5pc0NvbXBpbGVkU2NoZW1hKHNjaGVtYUl0ZW1zKSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvckVycm9ycyA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYUl0ZW1zLCBmaW5hbERhdGFbaV0pO1xyXG5cclxuICAgICAgICBmaW5hbERhdGFbaV0gPSB2YWxpZGF0b3JFcnJvcnMuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKCF2YWxpZGF0b3JFcnJvcnMudmFsaWQpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnZhbGlkYXRvckVycm9ycy5lcnJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMsIGRhdGE6IGZpbmFsRGF0YSB9O1xyXG4gIH0sXHJcblxyXG4gIG1pbkl0ZW1zKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8IGRhdGEubGVuZ3RoID49IHNjaGVtYS5taW5JdGVtcykge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXMgdG9vIHNob3J0Jywge1xyXG4gICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgY29kZTogJ0FSUkFZX1RPT19TSE9SVCcsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIG1heEl0ZW1zKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8IGRhdGEubGVuZ3RoIDw9IHNjaGVtYS5tYXhJdGVtcykge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignQXJyYXkgaXMgdG9vIGxvbmcnLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnQVJSQVlfVE9PX0xPTkcnLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBhZGRpdGlvbmFsSXRlbXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpIHx8ICFzY2hlbWEuaXRlbXMgfHwgIUFycmF5LmlzQXJyYXkoc2NoZW1hLml0ZW1zKSkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzY2hlbWEuYWRkaXRpb25hbEl0ZW1zID09PSBmYWxzZSkge1xyXG4gICAgICBpZiAoZGF0YS5sZW5ndGggPiBzY2hlbWEuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yczogW1xyXG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdBcnJheSBoYXMgdG9vIG1hbnkgaXRlbXMnLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnQVJSQVlfVE9PX01BTllfSVRFTVMnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyb3JzID0gW107XHJcbiAgICBsZXQgZmluYWxEYXRhID0gWy4uLmRhdGFdO1xyXG4gICAgaWYgKHNjaGVtYVNoaWVsZEluc3RhbmNlLmlzQ29tcGlsZWRTY2hlbWEoc2NoZW1hLmFkZGl0aW9uYWxJdGVtcykpIHtcclxuICAgICAgZm9yIChsZXQgaSA9IHNjaGVtYS5pdGVtcy5sZW5ndGg7IGkgPCBmaW5hbERhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEuYWRkaXRpb25hbEl0ZW1zLCBmaW5hbERhdGFbaV0pO1xyXG4gICAgICAgIGlmICghdmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaCguLi52YWxpZGF0b3JSZXN1bHQuZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxEYXRhW2ldID0gdmFsaWRhdG9yUmVzdWx0LmRhdGE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICB9LFxyXG5cclxuICB1bmlxdWVJdGVtcyhzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSB8fCAhc2NoZW1hLnVuaXF1ZUl0ZW1zKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdW5pcXVlID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhKSB7XHJcbiAgICAgIGxldCBpdGVtU3RyO1xyXG5cclxuICAgICAgLy8gQ2hhbmdlIHN0cmluZyB0byBcInN0cmluZ1wiIHRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlc1xyXG4gICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaXRlbVN0ciA9IGBcIiR7aXRlbX1cImA7XHJcblxyXG4gICAgICAgIC8vIFNvcnQgb2JqZWN0IGtleXMgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXHJcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoaXRlbSkpIHtcclxuICAgICAgICBjb25zdCBzb3J0ZWQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoaXRlbSkuc29ydCgoW2FdLCBbYl0pID0+IGEubG9jYWxlQ29tcGFyZShiKSkpO1xyXG4gICAgICAgIGl0ZW1TdHIgPSBKU09OLnN0cmluZ2lmeShzb3J0ZWQpO1xyXG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcclxuICAgICAgICBpdGVtU3RyID0gSlNPTi5zdHJpbmdpZnkoaXRlbSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaXRlbVN0ciA9IGl0ZW07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh1bmlxdWUuaGFzKGl0ZW1TdHIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yczogW1xyXG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZScsIHtcclxuICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICAgIGNvZGU6ICdBUlJBWV9JVEVNU19OT1RfVU5JUVVFJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgZGF0YSxcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVuaXF1ZS5zZXQoaXRlbVN0ciwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gIH0sXHJcbn07XHJcbiIsImltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgZGVlcEVxdWFsIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuaW1wb3J0IHsgVmFsaWRhdG9yRnVuY3Rpb24gfSBmcm9tICcuLi9pbmRleCc7XHJcblxyXG5leHBvcnQgY29uc3QgU3RyaW5nS2V5d29yZHM6IFJlY29yZDxzdHJpbmcsIFZhbGlkYXRvckZ1bmN0aW9uPiA9IHtcclxuICBtaW5MZW5ndGgoc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnIHx8IGRhdGEubGVuZ3RoID49IHNjaGVtYS5taW5MZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgIGVycm9yczogW1xyXG4gICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1N0cmluZyBpcyB0b28gc2hvcnQnLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnU1RSSU5HX1RPT19TSE9SVCcsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIG1heExlbmd0aChzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ3N0cmluZycgfHwgZGF0YS5sZW5ndGggPD0gc2NoZW1hLm1heExlbmd0aCkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignU3RyaW5nIGlzIHRvbyBsb25nJywge1xyXG4gICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgY29kZTogJ1NUUklOR19UT09fTE9ORycsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIHBhdHRlcm4oc2NoZW1hLCBkYXRhLCBwb2ludGVyKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGF0dGVyblJlZ2V4cCA9IG5ldyBSZWdFeHAoc2NoZW1hLnBhdHRlcm4sICd1Jyk7XHJcblxyXG4gICAgaWYgKHBhdHRlcm5SZWdleHAgaW5zdGFuY2VvZiBSZWdFeHAgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yczogW1xyXG4gICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignUGF0dGVybiBpcyBub3QgYSB2YWxpZCByZWd1bGFyIGV4cHJlc3Npb24nLCB7XHJcbiAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICBjb2RlOiAnUEFUVEVSTl9JU19OT1RfUkVHRVhQJyxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZCA9IHBhdHRlcm5SZWdleHAudGVzdChkYXRhKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZCxcclxuICAgICAgZXJyb3JzOiB2YWxpZFxyXG4gICAgICAgID8gW11cclxuICAgICAgICA6IFtcclxuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm4nLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnU1RSSU5HX0RPRVNfTk9UX01BVENIX1BBVFRFUk4nLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGZvcm1hdChzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIGZvcm1hdEluc3RhbmNlKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybWF0VmFsaWRhdGUgPSBmb3JtYXRJbnN0YW5jZS5mb3JtYXRzLmdldChzY2hlbWEuZm9ybWF0KTtcclxuICAgIGlmICghZm9ybWF0VmFsaWRhdGUpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKGBVbmtub3duIGZvcm1hdCAke3NjaGVtYS5mb3JtYXR9YCwge1xyXG4gICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgY29kZTogJ1VOS05PV05fRk9STUFUJyxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZCA9IGZvcm1hdFZhbGlkYXRlKGRhdGEpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkLFxyXG4gICAgICBlcnJvcnM6IHZhbGlkXHJcbiAgICAgICAgPyBbXVxyXG4gICAgICAgIDogW1xyXG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKGBTdHJpbmcgZG9lcyBub3QgbWF0Y2ggZm9ybWF0ICR7c2NoZW1hLmZvcm1hdH1gLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnU1RSSU5HX0RPRVNfTk9UX01BVENIX0ZPUk1BVCcsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgZW51bShzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIC8vIENoZWNrIGlmIGRhdGEgaXMgYW4gYXJyYXkgb3IgYW4gb2JqZWN0XHJcbiAgICBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheShkYXRhKTtcclxuICAgIGNvbnN0IGlzT2JqZWN0ID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEgIT09IG51bGw7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEuZW51bS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBlbnVtSXRlbSA9IHNjaGVtYS5lbnVtW2ldO1xyXG5cclxuICAgICAgLy8gU2ltcGxlIGVxdWFsaXR5IGNoZWNrXHJcbiAgICAgIGlmIChlbnVtSXRlbSA9PT0gZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIElmIGRhdGEgaXMgYW4gYXJyYXkgb3IgYW4gb2JqZWN0LCBjaGVjayBmb3IgZGVlcCBlcXVhbGl0eVxyXG4gICAgICBpZiAoKGlzQXJyYXkgJiYgQXJyYXkuaXNBcnJheShlbnVtSXRlbSkpIHx8IChpc09iamVjdCAmJiB0eXBlb2YgZW51bUl0ZW0gPT09ICdvYmplY3QnICYmIGVudW1JdGVtICE9PSBudWxsKSkge1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoZW51bUl0ZW0sIGRhdGEpKSB7XHJcbiAgICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBiZSBvbmUgb2YgJHtzY2hlbWEuZW51bS5qb2luKCcsICcpfWAsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdWQUxVRV9OT1RfSU5fRU5VTScsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcbn07XHJcbiIsImltcG9ydCB7IGFyZUNsb3NlRW5vdWdoLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IFZhbGlkYXRvckZ1bmN0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IE51bWJlcktleXdvcmRzOiBSZWNvcmQ8c3RyaW5nLCBWYWxpZGF0b3JGdW5jdGlvbj4gPSB7XHJcbiAgbWluaW11bShzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdudW1iZXInKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1pbiA9IHNjaGVtYS5taW5pbXVtO1xyXG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuZXhjbHVzaXZlTWluaW11bSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgbWluID0gc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gKyAxZS0xNTtcclxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gPT09IHRydWUpIHtcclxuICAgICAgbWluICs9IDFlLTE1O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZhbGlkID0gZGF0YSA+PSBtaW47XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQsXHJcbiAgICAgIGVycm9yczogdmFsaWRcclxuICAgICAgICA/IFtdXHJcbiAgICAgICAgOiBbXHJcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ051bWJlciBpcyB0b28gc21hbGwnLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnTlVNQkVSX1RPT19TTUFMTCcsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgbWF4aW11bShzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICdudW1iZXInKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1heCA9IHNjaGVtYS5tYXhpbXVtO1xyXG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuZXhjbHVzaXZlTWF4aW11bSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgbWF4ID0gc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gLSAxZS0xNTtcclxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gPT09IHRydWUpIHtcclxuICAgICAgbWF4IC09IDFlLTE1O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZhbGlkID0gZGF0YSA8PSBtYXg7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsaWQsXHJcbiAgICAgIGVycm9yczogdmFsaWRcclxuICAgICAgICA/IFtdXHJcbiAgICAgICAgOiBbXHJcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoJ051bWJlciBpcyB0b28gYmlnJywge1xyXG4gICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICAgICAgY29kZTogJ05VTUJFUl9UT09fQklHJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBtdWx0aXBsZU9mKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnbnVtYmVyJykge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHF1b3RpZW50ID0gZGF0YSAvIHNjaGVtYS5tdWx0aXBsZU9mO1xyXG5cclxuICAgIC8vIERldGVjdCBvdmVyZmxvdyBoYW5kbGluZyBpbiBKU1xyXG4gICAgaWYgKCFpc0Zpbml0ZShxdW90aWVudCkpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhcmVNdWx0aXBsZXMgPSBhcmVDbG9zZUVub3VnaChxdW90aWVudCwgTWF0aC5yb3VuZChxdW90aWVudCkpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBhcmVNdWx0aXBsZXMsXHJcbiAgICAgIGVycm9yczogYXJlTXVsdGlwbGVzXHJcbiAgICAgICAgPyBbXVxyXG4gICAgICAgIDogW1xyXG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdOdW1iZXIgaXMgbm90IGEgbXVsdGlwbGUgb2YnLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnTlVNQkVSX05PVF9NVUxUSVBMRV9PRicsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgZXhjbHVzaXZlTWluaW11bShzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHNjaGVtYS5leGNsdXNpdmVNaW5pbXVtICE9PSAnbnVtYmVyJyB8fCAnbWluaW11bScgaW4gc2NoZW1hKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmFsaWQgPSBkYXRhID4gc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gKyAxZS0xNTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZCxcclxuICAgICAgZXJyb3JzOiB2YWxpZFxyXG4gICAgICAgID8gW11cclxuICAgICAgICA6IFtcclxuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignTnVtYmVyIGlzIHRvbyBzbWFsbCcsIHtcclxuICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICAgIGNvZGU6ICdOVU1CRVJfVE9PX1NNQUxMJyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBleGNsdXNpdmVNYXhpbXVtKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnbnVtYmVyJyB8fCB0eXBlb2Ygc2NoZW1hLmV4Y2x1c2l2ZU1heGltdW0gIT09ICdudW1iZXInIHx8ICdtYXhpbXVtJyBpbiBzY2hlbWEpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZCA9IGRhdGEgPCBzY2hlbWEuZXhjbHVzaXZlTWF4aW11bSAtIDFlLTE1O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkLFxyXG4gICAgICBlcnJvcnM6IHZhbGlkXHJcbiAgICAgICAgPyBbXVxyXG4gICAgICAgIDogW1xyXG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKCdOdW1iZXIgaXMgdG9vIGJpZycsIHtcclxuICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICAgIGNvZGU6ICdOVU1CRVJfVE9PX0JJRycsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxufTtcclxuIiwiaW1wb3J0IHsgQ29tcGlsZWRTY2hlbWEsIFZhbGlkYXRvckZ1bmN0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIGlzT2JqZWN0LCBkZWVwRXF1YWwgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5leHBvcnQgY29uc3QgT3RoZXJLZXl3b3JkczogUmVjb3JkPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24+ID0ge1xyXG4gIG51bGxhYmxlKHNjaGVtYSwgZGF0YSwgcG9pbnRlcikge1xyXG4gICAgaWYgKHNjaGVtYS5udWxsYWJsZSAmJiBkYXRhICE9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yczogW1xyXG4gICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcignVmFsdWUgbXVzdCBiZSBudWxsIHRvIGJlIGVtcHR5Jywge1xyXG4gICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgY29kZTogJ1ZBTFVFX05PVF9OVUxMJyxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gIH0sXHJcblxyXG4gIGFsbE9mKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgbGV0IGZpbmFsRGF0YSA9IGRhdGE7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYS5hbGxPZi5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoaXNPYmplY3Qoc2NoZW1hLmFsbE9mW2ldKSkge1xyXG4gICAgICAgIGNvbnN0IHZhbGlkYXRvclJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5hbGxPZltpXSwgZmluYWxEYXRhKTtcclxuXHJcbiAgICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnZhbGlkYXRvclJlc3VsdC5lcnJvcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmluYWxEYXRhID0gdmFsaWRhdG9yUmVzdWx0LmRhdGE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWEuYWxsT2ZbaV0gPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgaWYgKEJvb2xlYW4oZGF0YSkgIT09IHNjaGVtYS5hbGxPZltpXSkge1xyXG4gICAgICAgICAgICBlcnJvcnMucHVzaChcclxuICAgICAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKGBWYWx1ZSBtdXN0IG1hdGNoIGFsbCBzY2hlbWFzIGluIGFsbE9mYCwge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgY29kZTogJ1ZBTFVFX0RPRVNfTk9UX01BVENIX0FMTF9PRicsXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRhdGEgIT09IHNjaGVtYS5hbGxPZltpXSkge1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3QgbWF0Y2ggYWxsIHNjaGVtYXMgaW4gYWxsT2ZgLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnVkFMVUVfRE9FU19OT1RfTUFUQ0hfQUxMX09GJyxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycywgZGF0YTogZmluYWxEYXRhIH07XHJcbiAgfSxcclxuXHJcbiAgYW55T2Yoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xyXG4gICAgbGV0IGZpbmFsRGF0YSA9IGRhdGE7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEuYW55T2YubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KHNjaGVtYS5hbnlPZltpXSkpIHtcclxuICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmFueU9mW2ldLCBmaW5hbERhdGEpO1xyXG4gICAgICAgIGZpbmFsRGF0YSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YTtcclxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGE6IGZpbmFsRGF0YSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodHlwZW9mIHNjaGVtYS5hbnlPZltpXSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICBpZiAoQm9vbGVhbihkYXRhKSA9PT0gc2NoZW1hLmFueU9mW2ldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhID09PSBzY2hlbWEuYW55T2ZbaV0pIHtcclxuICAgICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgIGVycm9yczogW1xyXG4gICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3QgbWF0Y2ggYXQgbGVhc3Qgb25lIHNjaGVtYSBpbiBhbnlPZmAsIHtcclxuICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgIGNvZGU6ICdWQUxVRV9ET0VTX05PVF9NQVRDSF9BTllfT0YnLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICBdLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBvbmVPZihzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcclxuICAgIGxldCB2YWxpZENvdW50ID0gMDtcclxuICAgIGxldCBmaW5hbERhdGEgPSBkYXRhO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2hlbWEub25lT2YubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGlzT2JqZWN0KHNjaGVtYS5vbmVPZltpXSkpIHtcclxuICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLm9uZU9mW2ldLCBmaW5hbERhdGEpO1xyXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICB2YWxpZENvdW50Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnZhbGlkYXRpb25SZXN1bHQuZXJyb3JzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxEYXRhID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc2NoZW1hLm9uZU9mW2ldID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgIGlmIChCb29sZWFuKGRhdGEpID09PSBzY2hlbWEub25lT2ZbaV0pIHtcclxuICAgICAgICAgICAgdmFsaWRDb3VudCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YSA9PT0gc2NoZW1hLm9uZU9mW2ldKSB7XHJcbiAgICAgICAgICB2YWxpZENvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZhbGlkQ291bnQgPT09IDEpIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGE6IGZpbmFsRGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBtYXRjaCBleGFjdGx5IG9uZSBzY2hlbWEgaW4gb25lT2ZgLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnVkFMVUVfRE9FU19OT1RfTUFUQ0hfT05FX09GJyxcclxuICAgICAgICB9KSxcclxuICAgICAgXSxcclxuICAgICAgZGF0YTogZmluYWxEYXRhLFxyXG4gICAgfTtcclxuICB9LFxyXG5cclxuICBkZXBlbmRlbmNpZXMoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xyXG4gICAgaWYgKCFpc09iamVjdChkYXRhKSkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVycm9ycyA9IFtdO1xyXG4gICAgbGV0IGZpbmFsRGF0YSA9IGRhdGE7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuZGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgIGlmIChrZXkgaW4gZGF0YSA9PT0gZmFsc2UpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGVwZW5kZW5jeSA9IHNjaGVtYS5kZXBlbmRlbmNpZXNba2V5XTtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVwZW5kZW5jeSkpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcGVuZGVuY3kubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmICghKGRlcGVuZGVuY3lbaV0gaW4gZGF0YSkpIHtcclxuICAgICAgICAgICAgZXJyb3JzLnB1c2goXHJcbiAgICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgRGVwZW5kZW5jeSAke2RlcGVuZGVuY3lbaV19IGlzIG1pc3NpbmdgLCB7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICBjb2RlOiAnREVQRU5ERU5DWV9NSVNTSU5HJyxcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHR5cGVvZiBkZXBlbmRlbmN5ID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBpZiAoZGVwZW5kZW5jeSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVycm9ycy5wdXNoKFxyXG4gICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgRGVwZW5kZW5jeSAke2tleX0gaXMgbWlzc2luZ2AsIHtcclxuICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICAgIGNvZGU6ICdERVBFTkRFTkNZX01JU1NJTkcnLFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodHlwZW9mIGRlcGVuZGVuY3kgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaWYgKGRlcGVuZGVuY3kgaW4gZGF0YSkge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVycm9ycy5wdXNoKFxyXG4gICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgRGVwZW5kZW5jeSAke2RlcGVuZGVuY3l9IGlzIG1pc3NpbmdgLCB7XHJcbiAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgICBjb2RlOiAnREVQRU5ERU5DWV9NSVNTSU5HJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdmFsaWRhdG9yUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoZGVwZW5kZW5jeSwgZmluYWxEYXRhKTtcclxuICAgICAgaWYgKCF2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCguLi52YWxpZGF0b3JSZXN1bHQuZXJyb3JzKTtcclxuICAgICAgfVxyXG4gICAgICBmaW5hbERhdGEgPSB2YWxpZGF0b3JSZXN1bHQuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzLCBkYXRhOiBmaW5hbERhdGEgfTtcclxuICB9LFxyXG5cclxuICBjb25zdChzY2hlbWEsIGRhdGEsIHBvaW50ZXIpIHtcclxuICAgIGlmIChcclxuICAgICAgZGF0YSA9PT0gc2NoZW1hLmNvbnN0IHx8XHJcbiAgICAgIChpc09iamVjdChkYXRhKSAmJiBpc09iamVjdChzY2hlbWEuY29uc3QpICYmIGRlZXBFcXVhbChkYXRhLCBzY2hlbWEuY29uc3QpKSB8fFxyXG4gICAgICAoQXJyYXkuaXNBcnJheShkYXRhKSAmJiBBcnJheS5pc0FycmF5KHNjaGVtYS5jb25zdCkgJiYgZGVlcEVxdWFsKGRhdGEsIHNjaGVtYS5jb25zdCkpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgIGVycm9yczogW1xyXG4gICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3QgYmUgZXF1YWwgdG8gY29uc3RgLCB7XHJcbiAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICBjb2RlOiAnVkFMVUVfTk9UX0VRVUFMX1RPX0NPTlNUJyxcclxuICAgICAgICB9KSxcclxuICAgICAgXSxcclxuICAgICAgZGF0YSxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgY29udGFpbnMoc2NoZW1hLCBkYXRhLCBwb2ludGVyLCBzY2hlbWFTaGllbGRJbnN0YW5jZSkge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuY29udGFpbnMgPT09ICdib29sZWFuJykge1xyXG4gICAgICBpZiAoc2NoZW1hLmNvbnRhaW5zKSB7XHJcbiAgICAgICAgY29uc3QgdmFsaWQgPSBkYXRhLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZhbGlkLFxyXG4gICAgICAgICAgZXJyb3JzOiB2YWxpZFxyXG4gICAgICAgICAgICA/IFtdXHJcbiAgICAgICAgICAgIDogW1xyXG4gICAgICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBpdGVtYCwge1xyXG4gICAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICAgICAgY29kZTogJ1ZBTFVFX0RPRVNfTk9UX0NPTlRBSU5fSVRFTScsXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgZGF0YSxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgICBlcnJvcnM6IFtcclxuICAgICAgICAgIG5ldyBWYWxpZGF0aW9uRXJyb3IoYFZhbHVlIG11c3Qgbm90IGNvbnRhaW4gYW55IGl0ZW1zYCwge1xyXG4gICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgY29kZTogJ1ZBTFVFX0NPTlRBSU5TX0lURU0nLFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgXSxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEuY29udGFpbnMsIGRhdGFbaV0pO1xyXG4gICAgICBpZiAodmFsaWRhdG9yUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBpdGVtIHRoYXQgbWF0Y2hlcyB0aGUgY29udGFpbnMgc2NoZW1hYCwge1xyXG4gICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgIHZhbHVlOiBkYXRhLFxyXG4gICAgICAgICAgY29kZTogJ1ZBTFVFX0RPRVNfTk9UX0NPTlRBSU5fTUFUQ0hJTkdfSVRFTScsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0sXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9O1xyXG4gIH0sXHJcblxyXG4gIGlmKHNjaGVtYSwgZGF0YSwgcG9pbnRlciwgc2NoZW1hU2hpZWxkSW5zdGFuY2UpIHtcclxuICAgIGlmICgndGhlbicgaW4gc2NoZW1hID09PSBmYWxzZSAmJiAnZWxzZScgaW4gc2NoZW1hID09PSBmYWxzZSkge1xyXG4gICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmlmID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgaWYgKHNjaGVtYS5pZikge1xyXG4gICAgICAgIGlmIChzY2hlbWEudGhlbikge1xyXG4gICAgICAgICAgY29uc3QgdGhlblJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS50aGVuLCBkYXRhKTtcclxuICAgICAgICAgIGlmICghdGhlblJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhlblJlc3VsdDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoc2NoZW1hLmVsc2UpIHtcclxuICAgICAgICBjb25zdCBlbHNlUmVzdWx0ID0gc2NoZW1hU2hpZWxkSW5zdGFuY2UudmFsaWRhdGUoc2NoZW1hLmVsc2UsIGRhdGEpO1xyXG4gICAgICAgIGlmICghZWxzZVJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsc2VSZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcnM6IFtdLCBkYXRhIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWZSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEuaWYsIGRhdGEpO1xyXG4gICAgaWYgKGlmUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgIGlmIChzY2hlbWEudGhlbikge1xyXG4gICAgICAgIGNvbnN0IHRoZW5SZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEudGhlbiwgZGF0YSk7XHJcbiAgICAgICAgaWYgKCF0aGVuUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhlblJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoc2NoZW1hLmVsc2UpIHtcclxuICAgICAgY29uc3QgZWxzZVJlc3VsdCA9IHNjaGVtYVNoaWVsZEluc3RhbmNlLnZhbGlkYXRlKHNjaGVtYS5lbHNlLCBkYXRhKTtcclxuICAgICAgaWYgKCFlbHNlUmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsc2VSZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JzOiBbXSwgZGF0YSB9O1xyXG4gIH0sXHJcblxyXG4gIG5vdChzY2hlbWEsIGRhdGEsIHBvaW50ZXIsIHNjaGVtYVNoaWVsZEluc3RhbmNlKSB7XHJcbiAgICBpZiAodHlwZW9mIHNjaGVtYS5ub3QgPT09ICdib29sZWFuJykge1xyXG4gICAgICBpZiAoc2NoZW1hLm5vdCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcnM6IFtcclxuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb25FcnJvcihgVmFsdWUgbXVzdCBub3QgYmUgdmFsaWRgLCB7XHJcbiAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICB2YWx1ZTogZGF0YSxcclxuICAgICAgICAgICAgICBjb2RlOiAnVkFMVUVfSVNfVkFMSUQnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBkYXRhLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB2YWxpZGF0b3JSZXN1bHQgPSBzY2hlbWFTaGllbGRJbnN0YW5jZS52YWxpZGF0ZShzY2hlbWEubm90LCBkYXRhKTtcclxuICAgIGlmICh2YWxpZGF0b3JSZXN1bHQudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3JzOiBbXHJcbiAgICAgICAgICBuZXcgVmFsaWRhdGlvbkVycm9yKGBWYWx1ZSBtdXN0IG5vdCBiZSB2YWxpZGAsIHtcclxuICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgdmFsdWU6IGRhdGEsXHJcbiAgICAgICAgICAgIGNvZGU6ICdWQUxVRV9JU19WQUxJRCcsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIGRhdGEgfTtcclxuICB9LFxyXG59O1xyXG4iLCJpbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIGlzT2JqZWN0IH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5pbXBvcnQgeyBGb3JtYXRzIH0gZnJvbSAnLi9mb3JtYXRzJztcclxuaW1wb3J0IHsgVHlwZXMgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsga2V5d29yZHMgfSBmcm9tICcuL2tleXdvcmRzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvbkVycm9yUHJvcHMge1xyXG4gIHBvaW50ZXI6IHN0cmluZztcclxuICB2YWx1ZTogYW55O1xyXG4gIGNvZGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHQge1xyXG4gIHZhbGlkOiBib29sZWFuO1xyXG4gIGVycm9yczogVmFsaWRhdGlvbkVycm9yW107XHJcbiAgZGF0YTogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRvckZ1bmN0aW9uIHtcclxuICAoc2NoZW1hOiBDb21waWxlZFNjaGVtYSwgZGF0YTogYW55LCBwb2ludGVyOiBzdHJpbmcsIHNjaGVtYVNoaWVsZEluc3RhbmNlOiBTY2hlbWFTaGllbGQpOiBSZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRm9ybWF0RnVuY3Rpb24ge1xyXG4gIChkYXRhOiBhbnkpOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBpbGVkU2NoZW1hIHtcclxuICB2YWxpZGF0b3JzPzogVmFsaWRhdG9yRnVuY3Rpb25bXTtcclxuICB0eXBlcz86IFZhbGlkYXRvckZ1bmN0aW9uW107XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRvciB7XHJcbiAgKGRhdGE6IGFueSk6IFJlc3VsdDtcclxuICBjb21waWxlZFNjaGVtYTogQ29tcGlsZWRTY2hlbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTY2hlbWFTaGllbGQge1xyXG4gIHR5cGVzID0gbmV3IE1hcDxzdHJpbmcsIFZhbGlkYXRvckZ1bmN0aW9uPigpO1xyXG4gIGZvcm1hdHMgPSBuZXcgTWFwPHN0cmluZywgRm9ybWF0RnVuY3Rpb24+KCk7XHJcbiAga2V5d29yZHMgPSBuZXcgTWFwPHN0cmluZywgVmFsaWRhdG9yRnVuY3Rpb24+KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgT2JqZWN0LmtleXMoVHlwZXMpLmZvckVhY2goKHR5cGUpID0+IHtcclxuICAgICAgdGhpcy5hZGRUeXBlKHR5cGUsIFR5cGVzW3R5cGVdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIE9iamVjdC5rZXlzKGtleXdvcmRzKS5mb3JFYWNoKChrZXl3b3JkKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkS2V5d29yZChrZXl3b3JkLCBrZXl3b3Jkc1trZXl3b3JkXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBPYmplY3Qua2V5cyhGb3JtYXRzKS5mb3JFYWNoKChmb3JtYXQpID0+IHtcclxuICAgICAgdGhpcy5hZGRGb3JtYXQoZm9ybWF0LCBGb3JtYXRzW2Zvcm1hdF0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRUeXBlKG5hbWU6IHN0cmluZywgdmFsaWRhdG9yOiBWYWxpZGF0b3JGdW5jdGlvbikge1xyXG4gICAgdGhpcy50eXBlcy5zZXQobmFtZSwgdmFsaWRhdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEZvcm1hdChuYW1lOiBzdHJpbmcsIHZhbGlkYXRvcjogRm9ybWF0RnVuY3Rpb24pIHtcclxuICAgIHRoaXMuZm9ybWF0cy5zZXQobmFtZSwgdmFsaWRhdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEtleXdvcmQobmFtZTogc3RyaW5nLCB2YWxpZGF0b3I6IFZhbGlkYXRvckZ1bmN0aW9uKSB7XHJcbiAgICB0aGlzLmtleXdvcmRzLnNldChuYW1lLCB2YWxpZGF0b3IpO1xyXG4gIH1cclxuXHJcbiAgY29tcGlsZShzY2hlbWE6IGFueSk6IFZhbGlkYXRvciB7XHJcbiAgICBjb25zdCBjb21waWxlZFNjaGVtYSA9IHRoaXMuY29tcGlsZVNjaGVtYShzY2hlbWEsICcjJyk7XHJcblxyXG4gICAgY29uc3QgdmFsaWRhdGU6IFZhbGlkYXRvciA9IChkYXRhOiBhbnkpID0+IHRoaXMudmFsaWRhdGUoY29tcGlsZWRTY2hlbWEsIGRhdGEpO1xyXG4gICAgdmFsaWRhdGUuY29tcGlsZWRTY2hlbWEgPSBjb21waWxlZFNjaGVtYTtcclxuXHJcbiAgICByZXR1cm4gdmFsaWRhdGU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNvbXBpbGVTY2hlbWEoc2NoZW1hOiBQYXJ0aWFsPENvbXBpbGVkU2NoZW1hPiB8IGFueSwgcG9pbnRlcik6IENvbXBpbGVkU2NoZW1hIHtcclxuICAgIGlmICghaXNPYmplY3Qoc2NoZW1hKSkge1xyXG4gICAgICBpZiAoc2NoZW1hID09PSB0cnVlKSB7XHJcbiAgICAgICAgc2NoZW1hID0ge1xyXG4gICAgICAgICAgYW55T2Y6IFt7IHR5cGU6ICdzdHJpbmcnIH0sIHsgdHlwZTogJ251bWJlcicgfSwgeyB0eXBlOiAnYm9vbGVhbicgfSwgeyB0eXBlOiAnYXJyYXknIH0sIHsgdHlwZTogJ29iamVjdCcgfSwgeyB0eXBlOiAnbnVsbCcgfV0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIGlmIChzY2hlbWEgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgc2NoZW1hID0ge1xyXG4gICAgICAgICAgb25lT2Y6IFtdLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2NoZW1hID0ge1xyXG4gICAgICAgICAgb25lT2Y6IFtzY2hlbWFdLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb21waWxlZFNjaGVtYTogQ29tcGlsZWRTY2hlbWEgPSB7fTtcclxuXHJcbiAgICBpZiAoJ3R5cGUnIGluIHNjaGVtYSkge1xyXG4gICAgICBjb25zdCB0eXBlcyA9IEFycmF5LmlzQXJyYXkoc2NoZW1hLnR5cGUpID8gc2NoZW1hLnR5cGUgOiBzY2hlbWEudHlwZS5zcGxpdCgnLCcpLm1hcCgodCkgPT4gdC50cmltKCkpO1xyXG5cclxuICAgICAgY29tcGlsZWRTY2hlbWEudHlwZXMgPSB0eXBlcy5tYXAoKHR5cGUpID0+IHRoaXMudHlwZXMuZ2V0KHR5cGUpKS5maWx0ZXIoKHZhbGlkYXRvcikgPT4gdmFsaWRhdG9yICE9PSB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcclxuICAgICAgaWYgKGtleSA9PT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmtleXdvcmRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgY29tcGlsZWRTY2hlbWEudmFsaWRhdG9ycyA9IGNvbXBpbGVkU2NoZW1hLnZhbGlkYXRvcnMgfHwgW107XHJcbiAgICAgICAgY29tcGlsZWRTY2hlbWEudmFsaWRhdG9ycy5wdXNoKHRoaXMua2V5d29yZHMuZ2V0KGtleSkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5pc1NjaGVtYUxpa2Uoc2NoZW1hW2tleV0pKSB7XHJcbiAgICAgICAgY29tcGlsZWRTY2hlbWFba2V5XSA9IHRoaXMuY29tcGlsZVNjaGVtYShzY2hlbWFba2V5XSwgYCR7cG9pbnRlcn0vJHtrZXl9YCk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hW2tleV0pKSB7XHJcbiAgICAgICAgY29tcGlsZWRTY2hlbWFba2V5XSA9IHNjaGVtYVtrZXldLm1hcCgoc3ViU2NoZW1hLCBpbmRleCkgPT5cclxuICAgICAgICAgIHRoaXMuaXNTY2hlbWFMaWtlKHN1YlNjaGVtYSkgPyB0aGlzLmNvbXBpbGVTY2hlbWEoc3ViU2NoZW1hLCBgJHtwb2ludGVyfS8ke2tleX0vJHtpbmRleH1gKSA6IHN1YlNjaGVtYVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpc09iamVjdChzY2hlbWFba2V5XSkpIHtcclxuICAgICAgICBjb21waWxlZFNjaGVtYVtrZXldID0gdGhpcy5jb21waWxlU2NoZW1hKHNjaGVtYVtrZXldLCBgJHtwb2ludGVyfS8ke2tleX1gKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29tcGlsZWRTY2hlbWFba2V5XSA9IHNjaGVtYVtrZXldO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjb21waWxlZFNjaGVtYTtcclxuICB9XHJcblxyXG4gIHZhbGlkYXRlKHNjaGVtYTogQ29tcGlsZWRTY2hlbWEsIGRhdGE6IGFueSk6IFJlc3VsdCB7XHJcbiAgICBsZXQgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXSA9IFtdO1xyXG5cclxuICAgIGlmIChzY2hlbWEudHlwZXMpIHtcclxuICAgICAgZm9yIChsZXQgdHlwZSBvZiBzY2hlbWEudHlwZXMpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0eXBlKHNjaGVtYSwgZGF0YSwgc2NoZW1hLnBvaW50ZXIsIHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAocmVzdWx0LnZhbGlkKSB7XHJcbiAgICAgICAgICBlcnJvcnMgPSBbXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXJyb3JzLnB1c2goLi4ucmVzdWx0LmVycm9ycyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NoZW1hLnZhbGlkYXRvcnMpIHtcclxuICAgICAgZm9yIChsZXQgdmFsaWRhdG9yIG9mIHNjaGVtYS52YWxpZGF0b3JzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yKHNjaGVtYSwgZGF0YSwgc2NoZW1hLnBvaW50ZXIsIHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAoIXJlc3VsdC52YWxpZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcclxuICAgICAgZXJyb3JzLFxyXG4gICAgICBkYXRhLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNTY2hlbWFPcktleXdvcmRQcmVzZW50KHN1YlNjaGVtYTogYW55KTogYm9vbGVhbiB7XHJcbiAgICBpZiAoJ3R5cGUnIGluIHN1YlNjaGVtYSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBzdWJLZXkgaW4gc3ViU2NoZW1hKSB7XHJcbiAgICAgIGlmICh0aGlzLmtleXdvcmRzLmhhcyhzdWJLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGlzU2NoZW1hTGlrZShzdWJTY2hlbWE6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGlzT2JqZWN0KHN1YlNjaGVtYSkgJiYgdGhpcy5pc1NjaGVtYU9yS2V5d29yZFByZXNlbnQoc3ViU2NoZW1hKTtcclxuICB9XHJcblxyXG4gIGlzQ29tcGlsZWRTY2hlbWEoc3ViU2NoZW1hOiBhbnkpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBpc09iamVjdChzdWJTY2hlbWEpICYmICgndmFsaWRhdG9ycycgaW4gc3ViU2NoZW1hIHx8ICd0eXBlcycgaW4gc3ViU2NoZW1hKTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiK0tBQUFBLEcsRUFBQSx3Q0FBQUMsRUFBQUMsR0FBQSxJQUFJQyxFQUFrQix1Q0FFbEJDLEVBQWlCLG1CQUNqQkMsRUFBaUIsS0FDakJDLEVBQVMsT0FDVEMsRUFBa0Isa0JBQ2xCQyxFQUFlLDBDQTRFbkJOLEVBQU9ELFFBQXlCLGdCQUFJLENBQ2xDRSxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNGLEcsNEVDdkZhQyxFQUFOLGNBQThCQyxNQUNuQ0MsS0FDQUMsUUFDQUMsUUFDQUMsTUFDQUMsS0FFQUMsWUFDRUgsRUFDQUksRUFBZ0MsQ0FDOUJMLFFBQVMsR0FDVEUsTUFBTyxLQUNQQyxLQUFNLEtBR1JHLE1BQU1MLEdBQ05NLEtBQUtSLEtBQU8sa0JBQ1pRLEtBQUtQLFFBQVVLLEVBQVFMLFFBQ3ZCTyxLQUFLTixRQUFVQSxFQUNmTSxLQUFLTCxNQUFRRyxFQUFRSCxNQUNyQkssS0FBS0osS0FBT0UsRUFBUUYsSUFDdEIsR0FhSyxTQUFTSyxFQUFVQyxFQUF1Q0MsR0FDL0QsR0FBSUMsTUFBTUMsUUFBUUgsSUFBUUUsTUFBTUMsUUFBUUYsR0FBUSxDQUM5QyxHQUFJRCxFQUFJSSxTQUFXSCxFQUFNRyxPQUN2QixPQUFPLEVBR1QsUUFBU0MsRUFBSSxFQUFHQSxFQUFJTCxFQUFJSSxPQUFRQyxJQUM5QixJQUFLTixFQUFVQyxFQUFJSyxHQUFJSixFQUFNSSxJQUMzQixPQUFPLEVBSVgsT0FBTyxDQUNULENBRUEsR0FBbUIsaUJBQVJMLEdBQXFDLGlCQUFWQyxFQUFvQixDQUN4RCxHQUFZLE9BQVJELEdBQTBCLE9BQVZDLEVBQ2xC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